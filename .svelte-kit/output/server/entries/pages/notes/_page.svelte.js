import { c as create_ssr_component, a as subscribe, b as add_attribute, d as each, e as escape } from "../../../chunks/ssr.js";
import { p as page } from "../../../chunks/stores.js";
import { g as getNotesByTag, a as getAllNotes } from "../../../chunks/index2.js";
import { g as groqApiKey } from "../../../chunks/settings.js";
import "../../../chunks/client.js";
const css = {
  code: ".line-clamp-3.svelte-1o294ye{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport { page } from \\"$app/stores\\";\\nimport { db, getAllNotes, getNotesByTag } from \\"$lib/db\\";\\nimport { groqApiKey, groqModels } from \\"$lib/stores/settings\\";\\nimport { goto } from \\"$app/navigation\\";\\nimport { fade, slide } from \\"svelte/transition\\";\\nimport MicButton from \\"$lib/components/MicButton.svelte\\";\\nlet apiKey = \\"\\";\\ngroqApiKey.subscribe((value) => {\\n  apiKey = value;\\n});\\nlet notes = [];\\nlet projects = [];\\nlet loading = true;\\nlet error = \\"\\";\\nlet searchQuery = \\"\\";\\nlet selectedTag = \\"\\";\\nlet allTags = [];\\nlet isRecording = false;\\nlet mediaRecorder = null;\\nlet audioChunks = [];\\nlet showForm = false;\\nlet editingNote = null;\\nlet noteForm = {\\n  title: \\"\\",\\n  content: \\"\\",\\n  tags: \\"\\",\\n  projectId: \\"\\",\\n  type: \\"general\\"\\n};\\nlet isProcessingAI = false;\\nlet aiAction = \\"\\";\\nonMount(async () => {\\n  const urlParams = new URLSearchParams($page.url.search);\\n  const noteId = urlParams.get(\\"note\\");\\n  const mode = urlParams.get(\\"mode\\");\\n  await loadNotes();\\n  await loadProjects();\\n  if (noteId && mode === \\"edit\\") {\\n    const allNotes = await getAllNotes();\\n    const note = allNotes.find((n) => n.id === noteId);\\n    if (note) {\\n      openEditForm(note);\\n    }\\n  }\\n});\\nasync function loadProjects() {\\n  try {\\n    projects = await db.projects.toArray();\\n  } catch (e) {\\n    console.error(\\"Failed to load projects:\\", e);\\n  }\\n}\\nasync function loadNotes() {\\n  loading = true;\\n  error = \\"\\";\\n  try {\\n    if (selectedTag) {\\n      notes = await getNotesByTag(selectedTag);\\n    } else if (searchQuery) {\\n      const all = await getAllNotes();\\n      notes = all.filter(\\n        (n) => n.title.toLowerCase().includes(searchQuery.toLowerCase()) || n.content.toLowerCase().includes(searchQuery.toLowerCase()) || n.tags.some((t) => t.toLowerCase().includes(searchQuery.toLowerCase()))\\n      );\\n    } else {\\n      notes = await getAllNotes();\\n    }\\n    extractTags();\\n  } catch (e) {\\n    error = \\"Failed to load notes\\";\\n    console.error(e);\\n  } finally {\\n    loading = false;\\n  }\\n}\\nfunction extractTags() {\\n  const tagSet = /* @__PURE__ */ new Set();\\n  notes.forEach((note) => {\\n    note.tags?.forEach((tag) => tagSet.add(tag));\\n  });\\n  allTags = Array.from(tagSet).sort();\\n}\\nfunction openNewNoteForm() {\\n  editingNote = null;\\n  noteForm = {\\n    title: \\"\\",\\n    content: \\"\\",\\n    tags: \\"\\",\\n    projectId: \\"\\",\\n    type: \\"general\\"\\n  };\\n  showForm = true;\\n}\\nfunction openEditForm(note) {\\n  editingNote = note;\\n  noteForm = {\\n    title: note.title,\\n    content: note.content,\\n    tags: note.tags?.join(\\", \\") || \\"\\",\\n    projectId: note.projectId || \\"\\",\\n    type: note.type || \\"general\\"\\n  };\\n  showForm = true;\\n}\\nasync function saveNote() {\\n  if (!noteForm.title.trim())\\n    return;\\n  error = \\"\\";\\n  const tags = noteForm.tags.split(\\",\\").map((t) => t.trim()).filter((t) => t);\\n  try {\\n    if (editingNote) {\\n      await db.notes.update(editingNote.id, {\\n        title: noteForm.title,\\n        content: noteForm.content,\\n        tags,\\n        projectId: noteForm.projectId || void 0,\\n        type: noteForm.type,\\n        updatedAt: /* @__PURE__ */ new Date()\\n      });\\n    } else {\\n      await db.notes.add({\\n        title: noteForm.title,\\n        content: noteForm.content,\\n        tags,\\n        projectId: noteForm.projectId || void 0,\\n        type: noteForm.type,\\n        createdAt: /* @__PURE__ */ new Date(),\\n        updatedAt: /* @__PURE__ */ new Date()\\n      });\\n    }\\n    showForm = false;\\n    editingNote = null;\\n    await loadNotes();\\n  } catch (e) {\\n    error = \\"Failed to save note\\";\\n    console.error(e);\\n  }\\n}\\nasync function deleteNote(note) {\\n  if (!confirm(\\"Are you sure you want to delete this note?\\"))\\n    return;\\n  try {\\n    await db.notes.delete(note.id);\\n    await loadNotes();\\n  } catch (e) {\\n    error = \\"Failed to delete note\\";\\n    console.error(e);\\n  }\\n}\\nasync function startRecording() {\\n  try {\\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\\n    mediaRecorder = new MediaRecorder(stream);\\n    audioChunks = [];\\n    mediaRecorder.ondataavailable = (e) => {\\n      audioChunks.push(e.data);\\n    };\\n    mediaRecorder.onstop = async () => {\\n      const audioBlob = new Blob(audioChunks, { type: \\"audio/webm\\" });\\n      await transcribeAudio(audioBlob);\\n      stream.getTracks().forEach((track) => track.stop());\\n    };\\n    mediaRecorder.start();\\n    isRecording = true;\\n  } catch (e) {\\n    error = \\"Failed to start recording\\";\\n    console.error(e);\\n  }\\n}\\nfunction stopRecording() {\\n  if (mediaRecorder && isRecording) {\\n    mediaRecorder.stop();\\n    isRecording = false;\\n  }\\n}\\nasync function transcribeAudio(audioBlob) {\\n  isProcessingAI = true;\\n  aiAction = \\"Transcribing voice note...\\";\\n  try {\\n    if (!apiKey) {\\n      error = \\"Please set your Groq API key in Settings\\";\\n      return;\\n    }\\n    const reader = new FileReader();\\n    const base64Promise = new Promise((resolve) => {\\n      reader.onloadend = () => {\\n        const base64 = reader.result;\\n        resolve(base64.split(\\",\\")[1]);\\n      };\\n    });\\n    reader.readAsDataURL(audioBlob);\\n    const base64Audio = await base64Promise;\\n    const response = await fetch(\\"https://api.groq.com/openai/v1/audio/transcriptions\\", {\\n      method: \\"POST\\",\\n      headers: {\\n        \\"Authorization\\": \`Bearer \${apiKey}\`\\n      },\\n      body: new FormData().append(\\"file\\", audioBlob, \\"audio.webm\\").append(\\"model\\", \\"whisper-large-v3\\")\\n    });\\n    if (!response.ok) {\\n      throw new Error(\\"Transcription failed\\");\\n    }\\n    const data = await response.json();\\n    if (editingNote) {\\n      noteForm.content += \\"\\\\n\\\\n\\" + data.text;\\n    } else {\\n      noteForm.content = data.text;\\n      noteForm.type = \\"voice\\";\\n    }\\n  } catch (e) {\\n    error = \\"Failed to transcribe audio\\";\\n    console.error(e);\\n  } finally {\\n    isProcessingAI = false;\\n    aiAction = \\"\\";\\n  }\\n}\\nasync function aiSummarize() {\\n  if (!noteForm.content.trim())\\n    return;\\n  isProcessingAI = true;\\n  aiAction = \\"Summarizing...\\";\\n  try {\\n    if (!apiKey) {\\n      error = \\"Please set your Groq API key in Settings\\";\\n      return;\\n    }\\n    const response = await fetch(\\"https://api.groq.com/openai/v1/chat/completions\\", {\\n      method: \\"POST\\",\\n      headers: {\\n        \\"Authorization\\": \`Bearer \${apiKey}\`,\\n        \\"Content-Type\\": \\"application/json\\"\\n      },\\n      body: JSON.stringify({\\n        model: \\"llama-3.1-70b-versatile\\",\\n        messages: [\\n          {\\n            role: \\"user\\",\\n            content: \`Summarize the following note concisely:\\n\\n\${noteForm.content}\`\\n          }\\n        ],\\n        temperature: 0.3\\n      })\\n    });\\n    if (!response.ok) {\\n      throw new Error(\\"AI request failed\\");\\n    }\\n    const data = await response.json();\\n    noteForm.content = data.choices[0].message.content;\\n  } catch (e) {\\n    error = \\"Failed to summarize\\";\\n    console.error(e);\\n  } finally {\\n    isProcessingAI = false;\\n    aiAction = \\"\\";\\n  }\\n}\\nasync function aiExpand() {\\n  if (!noteForm.content.trim())\\n    return;\\n  isProcessingAI = true;\\n  aiAction = \\"Expanding...\\";\\n  try {\\n    if (!apiKey) {\\n      error = \\"Please set your Groq API key in Settings\\";\\n      return;\\n    }\\n    const response = await fetch(\\"https://api.groq.com/openai/v1/chat/completions\\", {\\n      method: \\"POST\\",\\n      headers: {\\n        \\"Authorization\\": \`Bearer \${apiKey}\`,\\n        \\"Content-Type\\": \\"application/json\\"\\n      },\\n      body: JSON.stringify({\\n        model: \\"llama-3.1-70b-versatile\\",\\n        messages: [\\n          {\\n            role: \\"user\\",\\n            content: \`Expand and elaborate on the following note with more detail:\\n\\n\${noteForm.content}\`\\n          }\\n        ],\\n        temperature: 0.7\\n      })\\n    });\\n    if (!response.ok) {\\n      throw new Error(\\"AI request failed\\");\\n    }\\n    const data = await response.json();\\n    noteForm.content = data.choices[0].message.content;\\n  } catch (e) {\\n    error = \\"Failed to expand\\";\\n    console.error(e);\\n  } finally {\\n    isProcessingAI = false;\\n    aiAction = \\"\\";\\n  }\\n}\\nfunction formatDate(date) {\\n  return new Date(date).toLocaleDateString(\\"en-GB\\", {\\n    day: \\"numeric\\",\\n    month: \\"short\\",\\n    year: \\"numeric\\",\\n    hour: \\"2-digit\\",\\n    minute: \\"2-digit\\"\\n  });\\n}\\nfunction getProjectName(projectId) {\\n  if (!projectId)\\n    return null;\\n  const project = projects.find((p) => p.id === projectId);\\n  return project?.name || null;\\n}\\nfunction getTypeColor(type) {\\n  switch (type) {\\n    case \\"voice\\":\\n      return \\"bg-purple-100 text-purple-800\\";\\n    case \\"field\\":\\n      return \\"bg-green-100 text-green-800\\";\\n    default:\\n      return \\"bg-gray-100 text-gray-800\\";\\n  }\\n}\\n$:\\n  if (selectedTag !== void 0 || searchQuery !== void 0) {\\n    loadNotes();\\n  }\\n<\/script>\\n\\n<svelte:head>\\n\\t<title>Notes - Oscar AI</title>\\n</svelte:head>\\n\\n<div class=\\"max-w-6xl mx-auto\\">\\n\\t<!-- Header -->\\n\\t<div class=\\"mb-6 flex items-center justify-between\\">\\n\\t\\t<div>\\n\\t\\t\\t<h1 class=\\"text-2xl font-bold text-gray-900\\">Notes</h1>\\n\\t\\t\\t<p class=\\"text-gray-600\\">Create and manage your notes with AI assistance</p>\\n\\t\\t</div>\\n\\t\\t<button on:click={openNewNoteForm} class=\\"btn btn-primary\\">\\n\\t\\t\\t+ New Note\\n\\t\\t</button>\\n\\t</div>\\n\\n\\t<!-- Error -->\\n\\t{#if error}\\n\\t\\t<div class=\\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4\\">\\n\\t\\t\\t{error}\\n\\t\\t</div>\\n\\t{/if}\\n\\n\\t<!-- Search and Filter -->\\n\\t<div class=\\"mb-6 flex flex-col md:flex-row gap-4\\">\\n\\t\\t<input\\n\\t\\t\\ttype=\\"text\\"\\n\\t\\t\\tbind:value={searchQuery}\\n\\t\\t\\tplaceholder=\\"Search notes...\\"\\n\\t\\t\\tclass=\\"input flex-1\\"\\n\\t\\t/>\\n\\t\\t\\n\\t\\t{#if allTags.length > 0}\\n\\t\\t\\t<select\\n\\t\\t\\t\\tbind:value={selectedTag}\\n\\t\\t\\t\\tclass=\\"input w-full md:w-48\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\t<option value=\\"\\">All Tags</option>\\n\\t\\t\\t\\t{#each allTags as tag}\\n\\t\\t\\t\\t\\t<option value={tag}>{tag}</option>\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t</select>\\n\\t\\t{/if}\\n\\t</div>\\n\\n\\t<!-- Loading -->\\n\\t{#if loading}\\n\\t\\t<div class=\\"text-center py-12\\">\\n\\t\\t\\t<p class=\\"text-gray-500\\">Loading notes...</p>\\n\\t\\t</div>\\n\\t<!-- Empty State -->\\n\\t{:else if notes.length === 0}\\n\\t\\t<div class=\\"text-center py-12\\">\\n\\t\\t\\t<p class=\\"text-gray-500 mb-4\\">No notes yet</p>\\n\\t\\t\\t<button on:click={openNewNoteForm} class=\\"btn btn-primary\\">\\n\\t\\t\\t\\tCreate Your First Note\\n\\t\\t\\t</button>\\n\\t\\t</div>\\n\\t<!-- Notes List -->\\n\\t{:else}\\n\\t\\t<div class=\\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\\">\\n\\t\\t\\t{#each notes as note (note.id)}\\n\\t\\t\\t\\t<div class=\\"card p-4 hover:shadow-md transition-shadow cursor-pointer\\" on:click={() => openEditForm(note)} transition:fade>\\n\\t\\t\\t\\t\\t<div class=\\"flex items-start justify-between mb-2\\">\\n\\t\\t\\t\\t\\t\\t<h3 class=\\"font-semibold text-gray-900 truncate flex-1\\">{note.title}</h3>\\n\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\ton:click|stopPropagation={() => deleteNote(note)}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"text-gray-400 hover:text-red-500 p-1\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<svg class=\\"w-4 h-4\\" fill=\\"none\\" stroke=\\"currentColor\\" viewBox=\\"0 0 24 24\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<path stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" stroke-width=\\"2\\" d=\\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\\"></path>\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<p class=\\"text-gray-600 text-sm line-clamp-3 mb-3\\">{note.content}</p>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<div class=\\"flex flex-wrap gap-1 mb-2\\">\\n\\t\\t\\t\\t\\t\\t{#if note.type}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"px-2 py-0.5 text-xs rounded {getTypeColor(note.type)}\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{note.type}\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\t{#each (note.tags || []).slice(0, 3) as tag}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{tag}\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<div class=\\"flex items-center justify-between text-xs text-gray-500\\">\\n\\t\\t\\t\\t\\t\\t<span>{formatDate(note.updatedAt)}</span>\\n\\t\\t\\t\\t\\t\\t{#if getProjectName(note.projectId)}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"text-forest-600\\">{getProjectName(note.projectId)}</span>\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t{/each}\\n\\t\\t</div>\\n\\t{/if}\\n</div>\\n\\n<!-- Note Form Modal -->\\n{#if showForm}\\n\\t<div class=\\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\\" transition:fade>\\n\\t\\t<div class=\\"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col\\" transition:slide>\\n\\t\\t\\t<!-- Header -->\\n\\t\\t\\t<div class=\\"px-6 py-4 border-b flex items-center justify-between\\">\\n\\t\\t\\t\\t<h2 class=\\"text-lg font-semibold\\">\\n\\t\\t\\t\\t\\t{editingNote ? 'Edit Note' : 'New Note'}\\n\\t\\t\\t\\t</h2>\\n\\t\\t\\t\\t<button on:click={() => showForm = false} class=\\"text-gray-400 hover:text-gray-600\\">\\n\\t\\t\\t\\t\\t<svg class=\\"w-6 h-6\\" fill=\\"none\\" stroke=\\"currentColor\\" viewBox=\\"0 0 24 24\\">\\n\\t\\t\\t\\t\\t\\t<path stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" stroke-width=\\"2\\" d=\\"M6 18L18 6M6 6l12 12\\"></path>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t\\t\\n\\t\\t\\t<!-- Form -->\\n\\t\\t\\t<div class=\\"flex-1 overflow-y-auto p-6 space-y-4\\">\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<label for=\\"title\\" class=\\"block text-sm font-medium text-gray-700 mb-1\\">Title</label>\\n\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\tid=\\"title\\"\\n\\t\\t\\t\\t\\t\\ttype=\\"text\\"\\n\\t\\t\\t\\t\\t\\tbind:value={noteForm.title}\\n\\t\\t\\t\\t\\t\\tplaceholder=\\"Note title\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"input w-full\\"\\n\\t\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<div class=\\"grid grid-cols-1 md:grid-cols-2 gap-4\\">\\n\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t<label for=\\"type\\" class=\\"block text-sm font-medium text-gray-700 mb-1\\">Type</label>\\n\\t\\t\\t\\t\\t\\t<select id=\\"type\\" bind:value={noteForm.type} class=\\"input w-full\\">\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"general\\">General</option>\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"voice\\">Voice Note</option>\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"field\\">Field Note</option>\\n\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t<label for=\\"project\\" class=\\"block text-sm font-medium text-gray-700 mb-1\\">Link to Project</label>\\n\\t\\t\\t\\t\\t\\t<select id=\\"project\\" bind:value={noteForm.projectId} class=\\"input w-full\\">\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"\\">None</option>\\n\\t\\t\\t\\t\\t\\t\\t{#each projects as project}\\n\\t\\t\\t\\t\\t\\t\\t\\t<option value={project.id}>{project.name}</option>\\n\\t\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<label for=\\"tags\\" class=\\"block text-sm font-medium text-gray-700 mb-1\\">Tags (comma separated)</label>\\n\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\tid=\\"tags\\"\\n\\t\\t\\t\\t\\t\\ttype=\\"text\\"\\n\\t\\t\\t\\t\\t\\tbind:value={noteForm.tags}\\n\\t\\t\\t\\t\\t\\tplaceholder=\\"e.g., important, meeting, idea\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"input w-full\\"\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<div class=\\"flex items-center justify-between mb-1\\">\\n\\t\\t\\t\\t\\t\\t<label for=\\"content\\" class=\\"block text-sm font-medium text-gray-700\\">Content</label>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<!-- AI Tools -->\\n\\t\\t\\t\\t\\t\\t<div class=\\"flex gap-2\\">\\n\\t\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\t\\ton:click={aiSummarize}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isProcessingAI || !noteForm.content.trim()}\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50\\"\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t{isProcessingAI && aiAction === 'Summarizing...' ? 'Processing...' : 'Summarize'}\\n\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\t\\ton:click={aiExpand}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isProcessingAI || !noteForm.content.trim()}\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 disabled:opacity-50\\"\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t{isProcessingAI && aiAction === 'Expanding...' ? 'Processing...' : 'Expand'}\\n\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<textarea\\n\\t\\t\\t\\t\\t\\tid=\\"content\\"\\n\\t\\t\\t\\t\\t\\tbind:value={noteForm.content}\\n\\t\\t\\t\\t\\t\\tplaceholder=\\"Write your note here...\\"\\n\\t\\t\\t\\t\\t\\trows=\\"10\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"input w-full resize-none\\"\\n\\t\\t\\t\\t\\t></textarea>\\n\\t\\t\\t\\t\\t<div class=\\"mt-2\\">\\n\\t\\t\\t\\t\\t\\t<MicButton on:transcript={(e) => noteForm.content += e.detail.text} />\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<!-- Voice Recording -->\\n\\t\\t\\t\\t<div class=\\"flex items-center gap-4\\">\\n\\t\\t\\t\\t\\t{#if !isRecording}\\n\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\ton:click={startRecording}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"btn btn-secondary flex items-center gap-2\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<svg class=\\"w-4 h-4\\" fill=\\"currentColor\\" viewBox=\\"0 0 24 24\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\\"/>\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\\"/>\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t\\tRecord Voice\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\ton:click={stopRecording}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"btn bg-red-500 text-white hover:bg-red-600 flex items-center gap-2\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"w-2 h-2 bg-white rounded-full animate-pulse\\"></span>\\n\\t\\t\\t\\t\\t\\t\\tStop Recording\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t<span class=\\"text-sm text-red-600\\">Recording...</span>\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t{#if isProcessingAI}\\n\\t\\t\\t\\t\\t\\t<span class=\\"text-sm text-forest-600\\">{aiAction}</span>\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t\\n\\t\\t\\t<!-- Footer -->\\n\\t\\t\\t<div class=\\"px-6 py-4 border-t bg-gray-50 flex justify-end gap-3\\">\\n\\t\\t\\t\\t<button on:click={() => showForm = false} class=\\"btn btn-secondary\\">\\n\\t\\t\\t\\t\\tCancel\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t<button on:click={saveNote} class=\\"btn btn-primary\\">\\n\\t\\t\\t\\t\\t{editingNote ? 'Save Changes' : 'Create Note'}\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n{/if}\\n\\n<style>\\n\\t.line-clamp-3 {\\n\\t\\tdisplay: -webkit-box;\\n\\t\\t-webkit-line-clamp: 3;\\n\\t\\t-webkit-box-orient: vertical;\\n\\t\\toverflow: hidden;\\n\\t}\\n</style>\\n"],"names":[],"mappings":"AA8jBC,4BAAc,CACb,OAAO,CAAE,WAAW,CACpB,kBAAkB,CAAE,CAAC,CACrB,kBAAkB,CAAE,QAAQ,CAC5B,QAAQ,CAAE,MACX"}`
};
function formatDate(date) {
  return new Date(date).toLocaleDateString("en-GB", {
    day: "numeric",
    month: "short",
    year: "numeric",
    hour: "2-digit",
    minute: "2-digit"
  });
}
function getTypeColor(type) {
  switch (type) {
    case "voice":
      return "bg-purple-100 text-purple-800";
    case "field":
      return "bg-green-100 text-green-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
}
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_page;
  $$unsubscribe_page = subscribe(page, (value) => value);
  groqApiKey.subscribe((value) => {
  });
  let notes = [];
  let projects = [];
  let loading = true;
  let error = "";
  let searchQuery = "";
  let selectedTag = "";
  let allTags = [];
  async function loadNotes() {
    loading = true;
    error = "";
    try {
      if (selectedTag)
        ;
      else if (searchQuery)
        ;
      else {
        notes = await getAllNotes();
      }
      extractTags();
    } catch (e) {
      error = "Failed to load notes";
      console.error(e);
    } finally {
      loading = false;
    }
  }
  function extractTags() {
    const tagSet = /* @__PURE__ */ new Set();
    notes.forEach((note) => {
      note.tags?.forEach((tag) => tagSet.add(tag));
    });
    allTags = Array.from(tagSet).sort();
  }
  function getProjectName(projectId) {
    if (!projectId)
      return null;
    const project = projects.find((p) => p.id === projectId);
    return project?.name || null;
  }
  $$result.css.add(css);
  {
    {
      loadNotes();
    }
  }
  $$unsubscribe_page();
  return `${$$result.head += `<!-- HEAD_svelte-1r5lohg_START -->${$$result.title = `<title>Notes - Oscar AI</title>`, ""}<!-- HEAD_svelte-1r5lohg_END -->`, ""} <div class="max-w-6xl mx-auto"> <div class="mb-6 flex items-center justify-between"><div data-svelte-h="svelte-1q8uwez"><h1 class="text-2xl font-bold text-gray-900">Notes</h1> <p class="text-gray-600">Create and manage your notes with AI assistance</p></div> <button class="btn btn-primary" data-svelte-h="svelte-1363wms">+ New Note</button></div>  ${error ? `<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4">${escape(error)}</div>` : ``}  <div class="mb-6 flex flex-col md:flex-row gap-4"><input type="text" placeholder="Search notes..." class="input flex-1"${add_attribute("value", searchQuery, 0)}> ${allTags.length > 0 ? `<select class="input w-full md:w-48"><option value="" data-svelte-h="svelte-o3dety">All Tags</option>${each(allTags, (tag) => {
    return `<option${add_attribute("value", tag, 0)}>${escape(tag)}</option>`;
  })}</select>` : ``}</div>  ${loading ? `<div class="text-center py-12" data-svelte-h="svelte-zd80e"><p class="text-gray-500">Loading notes...</p></div> ` : `${notes.length === 0 ? `<div class="text-center py-12"><p class="text-gray-500 mb-4" data-svelte-h="svelte-1ujdiyq">No notes yet</p> <button class="btn btn-primary" data-svelte-h="svelte-1ne53z0">Create Your First Note</button></div> ` : `<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">${each(notes, (note) => {
    return `<div class="card p-4 hover:shadow-md transition-shadow cursor-pointer"><div class="flex items-start justify-between mb-2"><h3 class="font-semibold text-gray-900 truncate flex-1">${escape(note.title)}</h3> <button class="text-gray-400 hover:text-red-500 p-1" data-svelte-h="svelte-8mvads"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> </button></div> <p class="text-gray-600 text-sm line-clamp-3 mb-3 svelte-1o294ye">${escape(note.content)}</p> <div class="flex flex-wrap gap-1 mb-2">${note.type ? `<span class="${"px-2 py-0.5 text-xs rounded " + escape(getTypeColor(note.type), true) + " svelte-1o294ye"}">${escape(note.type)} </span>` : ``} ${each((note.tags || []).slice(0, 3), (tag) => {
      return `<span class="px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded">${escape(tag)} </span>`;
    })}</div> <div class="flex items-center justify-between text-xs text-gray-500"><span>${escape(formatDate(note.updatedAt))}</span> ${getProjectName(note.projectId) ? `<span class="text-forest-600">${escape(getProjectName(note.projectId))}</span>` : ``}</div> </div>`;
  })}</div>`}`}</div>  ${``}`;
});
export {
  Page as default
};

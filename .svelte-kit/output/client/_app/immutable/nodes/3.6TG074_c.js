import{I as ft,J as dt,K as Le,L as ht,s as _t,d as u,i as V,b as i,l as a,m as pt,g as x,c as h,e as D,o as J,j as A,h as _,k as mt,p as bt,a as re,f as te,t as le,n as $,r as Ee,D as Ne,u as Z,q as oe,E as rt,y as pe,F as qe,v as Se}from"../chunks/scheduler.DKaqMhG1.js";import{g as Ce,t as ie,c as Pe,a as ne,S as gt,i as vt,d as it,m as at,b as ct,e as ut}from"../chunks/index.DlqHU1Qv.js";import{g as kt}from"../chunks/globals.D0QH3NT1.js";import{e as ge}from"../chunks/each.C2d3_RSt.js";import{p as yt}from"../chunks/stores.BFoXjtDT.js";import{d as ye}from"../chunks/index.BvaDNSI_.js";import{g as Ct}from"../chunks/settings.a3gRd5qY.js";import{ar as Pt}from"../chunks/MarkdownRenderer.SQseg6rb.js";import{M as Et}from"../chunks/MicButton.BEMi5Q8G.js";function wt(n,e){const t=e.token={};function s(l,o,r,c){if(e.token!==t)return;e.resolved=c;let y=e.ctx;r!==void 0&&(y=y.slice(),y[r]=c);const I=l&&(e.current=l)(y);let v=!1;e.block&&(e.blocks?e.blocks.forEach((p,k)=>{k!==o&&p&&(Ce(),ie(p,1,1,()=>{e.blocks[k]===p&&(e.blocks[k]=null)}),Pe())}):e.block.d(1),I.c(),ne(I,1),I.m(e.mount(),e.anchor),v=!0),e.block=I,e.blocks&&(e.blocks[o]=I),v&&ht()}if(ft(n)){const l=dt();if(n.then(o=>{Le(l),s(e.then,1,e.value,o),Le(null)},o=>{if(Le(l),s(e.catch,2,e.error,o),Le(null),!e.hasCatch)throw o}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}const{document:Ge}=kt;function ze(n,e,t){const s=n.slice();return s[39]=e[t],s}function Je(n,e,t){const s=n.slice();return s[42]=e[t],s}function Fe(n,e,t){const s=n.slice();return s[45]=e[t],s}function It(n,e,t){const s=n.slice();return s[49]=e[t],s}function Ke(n){let e,t;return{c(){e=_("div"),t=le(n[3]),this.h()},l(s){e=h(s,"DIV",{class:!0});var l=D(e);t=te(l,n[3]),l.forEach(u),this.h()},h(){a(e,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4")},m(s,l){V(s,e,l),i(e,t)},p(s,l){l[0]&8&&re(t,s[3])},d(s){s&&u(e)}}}function We(n){let e,t;return{c(){e=_("div"),t=le(n[4]),this.h()},l(s){e=h(s,"DIV",{class:!0});var l=D(e);t=te(l,n[4]),l.forEach(u),this.h()},h(){a(e,"class","bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-4")},m(s,l){V(s,e,l),i(e,t)},p(s,l){l[0]&16&&re(t,s[4])},d(s){s&&u(e)}}}function Tt(n){let e,t,s="Select Project",l,o,r,c,y="Project",I,v,p,k="Select a project...",w,d,T,f,C,P,E,m={ctx:n,current:null,token:null,hasCatch:!1,pending:Nt,then:Dt,catch:At,value:48};wt(ye.projects.toArray(),m);const L=[jt,St],N=[];function U(b,g){return b[5]?1:0}return d=U(n),T=N[d]=L[d](n),{c(){e=_("div"),t=_("h2"),t.textContent=s,l=A(),o=_("div"),r=_("div"),c=_("label"),c.textContent=y,I=A(),v=_("select"),p=_("option"),p.textContent=k,m.block.c(),w=A(),T.c(),f=pe(),this.h()},l(b){e=h(b,"DIV",{class:!0});var g=D(e);t=h(g,"H2",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1oc3oga"&&(t.textContent=s),l=x(g),o=h(g,"DIV",{class:!0});var O=D(o);r=h(O,"DIV",{class:!0});var F=D(r);c=h(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(c)!=="svelte-1y1m5py"&&(c.textContent=y),I=x(F),v=h(F,"SELECT",{id:!0,class:!0});var R=D(v);p=h(R,"OPTION",{"data-svelte-h":!0}),J(p)!=="svelte-14lhltc"&&(p.textContent=k),m.block.l(R),R.forEach(u),F.forEach(u),O.forEach(u),g.forEach(u),w=x(b),T.l(b),f=pe(),this.h()},h(){a(t,"class","text-lg font-semibold mb-4"),a(c,"for","project"),a(c,"class","block text-sm font-medium text-gray-700 mb-1"),p.__value="",oe(p,p.__value),a(v,"id","project"),a(v,"class","input w-full"),n[5]===void 0&&rt(()=>n[14].call(v)),a(r,"class","flex-1"),a(o,"class","flex gap-4 items-end"),a(e,"class","card p-6 mb-6")},m(b,g){V(b,e,g),i(e,t),i(e,l),i(e,o),i(o,r),i(r,c),i(r,I),i(r,v),i(v,p),m.block.m(v,m.anchor=null),m.mount=()=>v,m.anchor=null,Ne(v,n[5],!0),V(b,w,g),N[d].m(b,g),V(b,f,g),C=!0,P||(E=[Z(v,"change",n[14]),Z(v,"change",n[13])],P=!0)},p(b,g){n=b,g[0]&32&&Ne(v,n[5]);let O=d;d=U(n),d===O?N[d].p(n,g):(Ce(),ie(N[O],1,1,()=>{N[O]=null}),Pe(),T=N[d],T?T.p(n,g):(T=N[d]=L[d](n),T.c()),ne(T,1),T.m(f.parentNode,f))},i(b){C||(ne(T),C=!0)},o(b){ie(T),C=!1},d(b){b&&(u(e),u(w),u(f)),m.block.d(),m.token=null,m=null,N[d].d(b),P=!1,Ee(E)}}}function xt(n){let e,t='<p class="text-gray-500">Loading...</p>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1xrscwp"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-12")},m(s,l){V(s,e,l)},p:$,i:$,o:$,d(s){s&&u(e)}}}function At(n){return{c:$,l:$,m:$,d:$}}function Dt(n){let e,t=ge(n[48]),s=[];for(let l=0;l<t.length;l+=1)s[l]=Lt(It(n,t,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=pe()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=pe()},m(l,o){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,o);V(l,e,o)},d(l){l&&u(e),Se(s,l)}}}function Lt(n){let e,t=n[49].name+"",s;return{c(){e=_("option"),s=le(t),this.h()},l(l){e=h(l,"OPTION",{});var o=D(e);s=te(o,t),o.forEach(u),this.h()},h(){e.__value=n[49].id,oe(e,e.__value)},m(l,o){V(l,e,o),i(e,s)},p:$,d(l){l&&u(e)}}}function Nt(n){return{c:$,l:$,m:$,d:$}}function St(n){let e,t,s="Create New Post",l,o,r,c=n[0].length+"",y,I,v,p,k,w,d,T,f,C=n[8]==="create"&&Ye(n),P=n[8]==="list"&&Qe(n),E=n[8]==="edit"&&n[9]&&tt(n);return{c(){e=_("div"),t=_("button"),t.textContent=s,l=A(),o=_("button"),r=le("View Posts ("),y=le(c),I=le(")"),v=A(),C&&C.c(),p=A(),P&&P.c(),k=A(),E&&E.c(),w=pe(),this.h()},l(m){e=h(m,"DIV",{class:!0});var L=D(e);t=h(L,"BUTTON",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-7u3cv7"&&(t.textContent=s),l=x(L),o=h(L,"BUTTON",{class:!0});var N=D(o);r=te(N,"View Posts ("),y=te(N,c),I=te(N,")"),N.forEach(u),L.forEach(u),v=x(m),C&&C.l(m),p=x(m),P&&P.l(m),k=x(m),E&&E.l(m),w=pe(),this.h()},h(){a(t,"class","btn btn-primary"),a(o,"class","btn btn-secondary"),a(e,"class","flex gap-4 mb-6")},m(m,L){V(m,e,L),i(e,t),i(e,l),i(e,o),i(o,r),i(o,y),i(o,I),V(m,v,L),C&&C.m(m,L),V(m,p,L),P&&P.m(m,L),V(m,k,L),E&&E.m(m,L),V(m,w,L),d=!0,T||(f=[Z(t,"click",n[15]),Z(o,"click",n[16])],T=!0)},p(m,L){(!d||L[0]&1)&&c!==(c=m[0].length+"")&&re(y,c),m[8]==="create"?C?(C.p(m,L),L[0]&256&&ne(C,1)):(C=Ye(m),C.c(),ne(C,1),C.m(p.parentNode,p)):C&&(Ce(),ie(C,1,1,()=>{C=null}),Pe()),m[8]==="list"?P?P.p(m,L):(P=Qe(m),P.c(),P.m(k.parentNode,k)):P&&(P.d(1),P=null),m[8]==="edit"&&m[9]?E?(E.p(m,L),L[0]&768&&ne(E,1)):(E=tt(m),E.c(),ne(E,1),E.m(w.parentNode,w)):E&&(Ce(),ie(E,1,1,()=>{E=null}),Pe())},i(m){d||(ne(C),ne(E),d=!0)},o(m){ie(C),ie(E),d=!1},d(m){m&&(u(e),u(v),u(p),u(k),u(w)),C&&C.d(m),P&&P.d(m),E&&E.d(m),T=!1,Ee(f)}}}function jt(n){let e,t="<p>Please select a project to create blog posts.</p>";return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1t8nm8g"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-12 text-gray-500")},m(s,l){V(s,e,l)},p:$,i:$,o:$,d(s){s&&u(e)}}}function Ye(n){let e,t,s="Generate New Blog Post",l,o,r,c,y="Blog Title *",I,v,p,k,w,d="Subtitle",T,f,C,P,E,m="Tags (comma-separated)",L,N,U,b,g,O="Style Profile (Optional)",F,R,H,q="Default AI Style",de,ee,K,we,ce,je="Include tree data in context",Ie,ae,ue,Oe="Additional Instructions",B,G,M,Y,se,he,W,fe=n[2]?"Generating Blog Post...":"Generate Blog Post with AI",me,z,_e,Be,Me,ve=ge(n[7]),X=[];for(let S=0;S<ve.length;S+=1)X[S]=Xe(Fe(n,ve,S));return se=new Et({}),se.$on("transcript",n[23]),{c(){e=_("div"),t=_("h2"),t.textContent=s,l=A(),o=_("div"),r=_("div"),c=_("label"),c.textContent=y,I=A(),v=_("input"),p=A(),k=_("div"),w=_("label"),w.textContent=d,T=A(),f=_("input"),C=A(),P=_("div"),E=_("label"),E.textContent=m,L=A(),N=_("input"),U=A(),b=_("div"),g=_("label"),g.textContent=O,F=A(),R=_("select"),H=_("option"),H.textContent=q;for(let S=0;S<X.length;S+=1)X[S].c();de=A(),ee=_("div"),K=_("input"),we=A(),ce=_("label"),ce.textContent=je,Ie=A(),ae=_("div"),ue=_("label"),ue.textContent=Oe,B=A(),G=_("textarea"),M=A(),Y=_("div"),ut(se.$$.fragment),he=A(),W=_("button"),me=le(fe),this.h()},l(S){e=h(S,"DIV",{class:!0});var Q=D(e);t=h(Q,"H2",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-oj7ohg"&&(t.textContent=s),l=x(Q),o=h(Q,"DIV",{class:!0});var j=D(o);r=h(j,"DIV",{});var be=D(r);c=h(be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(c)!=="svelte-1sc0pks"&&(c.textContent=y),I=x(be),v=h(be,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),be.forEach(u),p=x(j),k=h(j,"DIV",{});var Te=D(k);w=h(Te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(w)!=="svelte-1b0olnm"&&(w.textContent=d),T=x(Te),f=h(Te,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Te.forEach(u),C=x(j),P=h(j,"DIV",{});var xe=D(P);E=h(xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(E)!=="svelte-1lw9zoi"&&(E.textContent=m),L=x(xe),N=h(xe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),xe.forEach(u),U=x(j),b=h(j,"DIV",{});var Ae=D(b);g=h(Ae,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(g)!=="svelte-19ecxbz"&&(g.textContent=O),F=x(Ae),R=h(Ae,"SELECT",{id:!0,class:!0});var Ve=D(R);H=h(Ve,"OPTION",{"data-svelte-h":!0}),J(H)!=="svelte-qgy9w6"&&(H.textContent=q);for(let Ue=0;Ue<X.length;Ue+=1)X[Ue].l(Ve);Ve.forEach(u),Ae.forEach(u),de=x(j),ee=h(j,"DIV",{class:!0});var De=D(ee);K=h(De,"INPUT",{id:!0,type:!0,class:!0}),we=x(De),ce=h(De,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(ce)!=="svelte-vie3dg"&&(ce.textContent=je),De.forEach(u),Ie=x(j),ae=h(j,"DIV",{});var ke=D(ae);ue=h(ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(ue)!=="svelte-xqw78o"&&(ue.textContent=Oe),B=x(ke),G=h(ke,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),D(G).forEach(u),M=x(ke),Y=h(ke,"DIV",{class:!0});var Re=D(Y);ct(se.$$.fragment,Re),Re.forEach(u),ke.forEach(u),he=x(j),W=h(j,"BUTTON",{class:!0});var He=D(W);me=te(He,fe),He.forEach(u),j.forEach(u),Q.forEach(u),this.h()},h(){a(t,"class","text-lg font-semibold mb-4"),a(c,"for","title"),a(c,"class","block text-sm font-medium text-gray-700 mb-1"),a(v,"id","title"),a(v,"type","text"),a(v,"placeholder","e.g., 10 Essential Tree Care Tips for Property Owners"),a(v,"class","input w-full"),a(w,"for","subtitle"),a(w,"class","block text-sm font-medium text-gray-700 mb-1"),a(f,"id","subtitle"),a(f,"type","text"),a(f,"placeholder","e.g., A comprehensive guide to maintaining healthy trees"),a(f,"class","input w-full"),a(E,"for","tags"),a(E,"class","block text-sm font-medium text-gray-700 mb-1"),a(N,"id","tags"),a(N,"type","text"),a(N,"placeholder","e.g., tree care, arboriculture, property maintenance"),a(N,"class","input w-full"),a(g,"for","styleProfile"),a(g,"class","block text-sm font-medium text-gray-700 mb-1"),H.__value="",oe(H,H.__value),a(R,"id","styleProfile"),a(R,"class","input w-full"),n[6].styleProfile===void 0&&rt(()=>n[20].call(R)),a(K,"id","includePhotos"),a(K,"type","checkbox"),a(K,"class","rounded text-forest-600"),a(ce,"for","includePhotos"),a(ce,"class","text-sm text-gray-700"),a(ee,"class","flex items-center gap-2"),a(ue,"for","prompt"),a(ue,"class","block text-sm font-medium text-gray-700 mb-1"),a(G,"id","prompt"),a(G,"placeholder","Any specific topics or tone you want..."),a(G,"rows","3"),a(G,"class","input w-full"),a(Y,"class","mt-2"),W.disabled=z=n[2]||!n[6].title.trim(),a(W,"class","btn btn-primary w-full"),a(o,"class","space-y-4"),a(e,"class","card p-6")},m(S,Q){V(S,e,Q),i(e,t),i(e,l),i(e,o),i(o,r),i(r,c),i(r,I),i(r,v),oe(v,n[6].title),i(o,p),i(o,k),i(k,w),i(k,T),i(k,f),oe(f,n[6].subtitle),i(o,C),i(o,P),i(P,E),i(P,L),i(P,N),oe(N,n[6].tags),i(o,U),i(o,b),i(b,g),i(b,F),i(b,R),i(R,H);for(let j=0;j<X.length;j+=1)X[j]&&X[j].m(R,null);Ne(R,n[6].styleProfile,!0),i(o,de),i(o,ee),i(ee,K),K.checked=n[6].includePhotos,i(ee,we),i(ee,ce),i(o,Ie),i(o,ae),i(ae,ue),i(ae,B),i(ae,G),oe(G,n[6].prompt),i(ae,M),i(ae,Y),at(se,Y,null),i(o,he),i(o,W),i(W,me),_e=!0,Be||(Me=[Z(v,"input",n[17]),Z(f,"input",n[18]),Z(N,"input",n[19]),Z(R,"change",n[20]),Z(K,"change",n[21]),Z(G,"input",n[22]),Z(W,"click",n[10])],Be=!0)},p(S,Q){if(Q[0]&192&&v.value!==S[6].title&&oe(v,S[6].title),Q[0]&192&&f.value!==S[6].subtitle&&oe(f,S[6].subtitle),Q[0]&192&&N.value!==S[6].tags&&oe(N,S[6].tags),Q[0]&128){ve=ge(S[7]);let j;for(j=0;j<ve.length;j+=1){const be=Fe(S,ve,j);X[j]?X[j].p(be,Q):(X[j]=Xe(be),X[j].c(),X[j].m(R,null))}for(;j<X.length;j+=1)X[j].d(1);X.length=ve.length}Q[0]&192&&Ne(R,S[6].styleProfile),Q[0]&192&&(K.checked=S[6].includePhotos),Q[0]&192&&oe(G,S[6].prompt),(!_e||Q[0]&4)&&fe!==(fe=S[2]?"Generating Blog Post...":"Generate Blog Post with AI")&&re(me,fe),(!_e||Q[0]&196&&z!==(z=S[2]||!S[6].title.trim()))&&(W.disabled=z)},i(S){_e||(ne(se.$$.fragment,S),_e=!0)},o(S){ie(se.$$.fragment,S),_e=!1},d(S){S&&u(e),Se(X,S),it(se),Be=!1,Ee(Me)}}}function Xe(n){let e,t=n[45].name+"",s,l;return{c(){e=_("option"),s=le(t),this.h()},l(o){e=h(o,"OPTION",{});var r=D(e);s=te(r,t),r.forEach(u),this.h()},h(){e.__value=l=n[45].id,oe(e,e.__value)},m(o,r){V(o,e,r),i(e,s)},p(o,r){r[0]&128&&t!==(t=o[45].name+"")&&re(s,t),r[0]&128&&l!==(l=o[45].id)&&(e.__value=l,oe(e,e.__value))},d(o){o&&u(e)}}}function Qe(n){let e;function t(o,r){return o[0].length===0?Bt:Ot}let s=t(n),l=s(n);return{c(){l.c(),e=pe()},l(o){l.l(o),e=pe()},m(o,r){l.m(o,r),V(o,e,r)},p(o,r){s===(s=t(o))&&l?l.p(o,r):(l.d(1),l=s(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&u(e),l.d(o)}}}function Ot(n){let e,t=ge(n[0]),s=[];for(let l=0;l<t.length;l+=1)s[l]=et(Je(n,t,l));return{c(){e=_("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=h(l,"DIV",{class:!0});var o=D(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(u),this.h()},h(){a(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(l,o){V(l,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(l,o){if(o[0]&6145){t=ge(l[0]);let r;for(r=0;r<t.length;r+=1){const c=Je(l,t,r);s[r]?s[r].p(c,o):(s[r]=et(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(l){l&&u(e),Se(s,l)}}}function Bt(n){let e,t,s="No blog posts yet. Create your first one!",l,o,r="Create Blog Post",c,y;return{c(){e=_("div"),t=_("p"),t.textContent=s,l=A(),o=_("button"),o.textContent=r,this.h()},l(I){e=h(I,"DIV",{class:!0});var v=D(e);t=h(v,"P",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-2ucd7c"&&(t.textContent=s),l=x(v),o=h(v,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-7eiuo0"&&(o.textContent=r),v.forEach(u),this.h()},h(){a(t,"class","text-gray-500 mb-4"),a(o,"class","btn btn-primary"),a(e,"class","card p-6 text-center")},m(I,v){V(I,e,v),i(e,t),i(e,l),i(e,o),c||(y=Z(o,"click",n[24]),c=!0)},p:$,d(I){I&&u(e),c=!1,y()}}}function Ze(n){let e,t=n[42].subtitle+"",s;return{c(){e=_("p"),s=le(t),this.h()},l(l){e=h(l,"P",{class:!0});var o=D(e);s=te(o,t),o.forEach(u),this.h()},h(){a(e,"class","text-sm text-gray-600 mb-2")},m(l,o){V(l,e,o),i(e,s)},p(l,o){o[0]&1&&t!==(t=l[42].subtitle+"")&&re(s,t)},d(l){l&&u(e)}}}function $e(n){let e,t="â€¢",s,l=n[42].tags.slice(0,3).join(", ")+"",o;return{c(){e=_("span"),e.textContent=t,s=A(),o=le(l),this.h()},l(r){e=h(r,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-ybth69"&&(e.textContent=t),s=x(r),o=te(r,l),this.h()},h(){a(e,"class","mx-2")},m(r,c){V(r,e,c),V(r,s,c),V(r,o,c)},p(r,c){c[0]&1&&l!==(l=r[42].tags.slice(0,3).join(", ")+"")&&re(o,l)},d(r){r&&(u(e),u(s),u(o))}}}function et(n){let e,t,s=n[42].title+"",l,o,r,c,y=new Date(n[42].createdAt).toLocaleDateString()+"",I,v,p,k,w,d="View/Edit",T,f,C="Export",P,E,m="Delete",L,N,U,b=n[42].subtitle&&Ze(n),g=n[42].tags.length>0&&$e(n);function O(){return n[25](n[42])}function F(){return n[26](n[42])}function R(){return n[27](n[42])}return{c(){e=_("div"),t=_("h3"),l=le(s),o=A(),b&&b.c(),r=A(),c=_("p"),I=le(y),v=A(),g&&g.c(),p=A(),k=_("div"),w=_("button"),w.textContent=d,T=A(),f=_("button"),f.textContent=C,P=A(),E=_("button"),E.textContent=m,L=A(),this.h()},l(H){e=h(H,"DIV",{class:!0});var q=D(e);t=h(q,"H3",{class:!0});var de=D(t);l=te(de,s),de.forEach(u),o=x(q),b&&b.l(q),r=x(q),c=h(q,"P",{class:!0});var ee=D(c);I=te(ee,y),v=x(ee),g&&g.l(ee),ee.forEach(u),p=x(q),k=h(q,"DIV",{class:!0});var K=D(k);w=h(K,"BUTTON",{class:!0,"data-svelte-h":!0}),J(w)!=="svelte-12jpljc"&&(w.textContent=d),T=x(K),f=h(K,"BUTTON",{class:!0,"data-svelte-h":!0}),J(f)!=="svelte-1f0gw1e"&&(f.textContent=C),P=x(K),E=h(K,"BUTTON",{class:!0,"data-svelte-h":!0}),J(E)!=="svelte-zij99u"&&(E.textContent=m),K.forEach(u),L=x(q),q.forEach(u),this.h()},h(){a(t,"class","font-semibold text-gray-900 mb-1"),a(c,"class","text-xs text-gray-400 mb-3"),a(w,"class","text-sm text-forest-600 hover:underline"),a(f,"class","text-sm text-gray-600 hover:underline"),a(E,"class","text-sm text-red-600 hover:underline"),a(k,"class","flex gap-2"),a(e,"class","card p-4 hover:shadow-md transition-shadow")},m(H,q){V(H,e,q),i(e,t),i(t,l),i(e,o),b&&b.m(e,null),i(e,r),i(e,c),i(c,I),i(c,v),g&&g.m(c,null),i(e,p),i(e,k),i(k,w),i(k,T),i(k,f),i(k,P),i(k,E),i(e,L),N||(U=[Z(w,"click",O),Z(f,"click",F),Z(E,"click",R)],N=!0)},p(H,q){n=H,q[0]&1&&s!==(s=n[42].title+"")&&re(l,s),n[42].subtitle?b?b.p(n,q):(b=Ze(n),b.c(),b.m(e,r)):b&&(b.d(1),b=null),q[0]&1&&y!==(y=new Date(n[42].createdAt).toLocaleDateString()+"")&&re(I,y),n[42].tags.length>0?g?g.p(n,q):(g=$e(n),g.c(),g.m(c,null)):g&&(g.d(1),g=null)},d(H){H&&u(e),b&&b.d(),g&&g.d(),N=!1,Ee(U)}}}function tt(n){let e,t,s,l=n[9].title+"",o,r,c,y,I="Export",v,p,k="Close",w,d,T,f,C,P,E,m,L,N,U=n[9].subtitle&&lt(n),b=n[9].tags.length>0&&st(n);return E=new Pt({props:{content:n[9].bodyHTML}}),{c(){e=_("div"),t=_("div"),s=_("h2"),o=le(l),r=A(),c=_("div"),y=_("button"),y.textContent=I,v=A(),p=_("button"),p.textContent=k,w=A(),U&&U.c(),d=A(),b&&b.c(),T=A(),f=_("hr"),C=A(),P=_("div"),ut(E.$$.fragment),this.h()},l(g){e=h(g,"DIV",{class:!0});var O=D(e);t=h(O,"DIV",{class:!0});var F=D(t);s=h(F,"H2",{class:!0});var R=D(s);o=te(R,l),R.forEach(u),r=x(F),c=h(F,"DIV",{class:!0});var H=D(c);y=h(H,"BUTTON",{class:!0,"data-svelte-h":!0}),J(y)!=="svelte-16zwt8a"&&(y.textContent=I),v=x(H),p=h(H,"BUTTON",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-1rx5j0t"&&(p.textContent=k),H.forEach(u),F.forEach(u),w=x(O),U&&U.l(O),d=x(O),b&&b.l(O),T=x(O),f=h(O,"HR",{class:!0}),C=x(O),P=h(O,"DIV",{class:!0});var q=D(P);ct(E.$$.fragment,q),q.forEach(u),O.forEach(u),this.h()},h(){a(s,"class","text-lg font-semibold"),a(y,"class","btn btn-secondary text-sm"),a(p,"class","text-gray-500 hover:text-gray-700"),a(c,"class","flex gap-2"),a(t,"class","flex items-center justify-between mb-4"),a(f,"class","my-4"),a(P,"class","prose prose-sm max-w-none"),a(e,"class","card p-6")},m(g,O){V(g,e,O),i(e,t),i(t,s),i(s,o),i(t,r),i(t,c),i(c,y),i(c,v),i(c,p),i(e,w),U&&U.m(e,null),i(e,d),b&&b.m(e,null),i(e,T),i(e,f),i(e,C),i(e,P),at(E,P,null),m=!0,L||(N=[Z(y,"click",n[28]),Z(p,"click",n[29])],L=!0)},p(g,O){(!m||O[0]&512)&&l!==(l=g[9].title+"")&&re(o,l),g[9].subtitle?U?U.p(g,O):(U=lt(g),U.c(),U.m(e,d)):U&&(U.d(1),U=null),g[9].tags.length>0?b?b.p(g,O):(b=st(g),b.c(),b.m(e,T)):b&&(b.d(1),b=null);const F={};O[0]&512&&(F.content=g[9].bodyHTML),E.$set(F)},i(g){m||(ne(E.$$.fragment,g),m=!0)},o(g){ie(E.$$.fragment,g),m=!1},d(g){g&&u(e),U&&U.d(),b&&b.d(),it(E),L=!1,Ee(N)}}}function lt(n){let e,t=n[9].subtitle+"",s;return{c(){e=_("p"),s=le(t),this.h()},l(l){e=h(l,"P",{class:!0});var o=D(e);s=te(o,t),o.forEach(u),this.h()},h(){a(e,"class","text-lg text-gray-600 mb-4 italic")},m(l,o){V(l,e,o),i(e,s)},p(l,o){o[0]&512&&t!==(t=l[9].subtitle+"")&&re(s,t)},d(l){l&&u(e)}}}function st(n){let e,t=ge(n[9].tags),s=[];for(let l=0;l<t.length;l+=1)s[l]=ot(ze(n,t,l));return{c(){e=_("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=h(l,"DIV",{class:!0});var o=D(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(u),this.h()},h(){a(e,"class","flex gap-2 mb-4")},m(l,o){V(l,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(l,o){if(o[0]&512){t=ge(l[9].tags);let r;for(r=0;r<t.length;r+=1){const c=ze(l,t,r);s[r]?s[r].p(c,o):(s[r]=ot(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(l){l&&u(e),Se(s,l)}}}function ot(n){let e,t=n[39]+"",s,l;return{c(){e=_("span"),s=le(t),l=A(),this.h()},l(o){e=h(o,"SPAN",{class:!0});var r=D(e);s=te(r,t),l=x(r),r.forEach(u),this.h()},h(){a(e,"class","px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded")},m(o,r){V(o,e,r),i(e,s),i(e,l)},p(o,r){r[0]&512&&t!==(t=o[39]+"")&&re(s,t)},d(o){o&&u(e)}}}function Vt(n){let e,t,s,l='<h1 class="text-2xl font-bold text-gray-900 mb-2">Blog Writer</h1> <p class="text-gray-600">Generate engaging blog posts from your tree survey data.</p>',o,r,c,y,I,v,p=n[3]&&Ke(n),k=n[4]&&We(n);const w=[xt,Tt],d=[];function T(f,C){return f[1]?0:1}return y=T(n),I=d[y]=w[y](n),{c(){e=A(),t=_("div"),s=_("div"),s.innerHTML=l,o=A(),p&&p.c(),r=A(),k&&k.c(),c=A(),I.c(),this.h()},l(f){pt("svelte-kzn4ky",Ge.head).forEach(u),e=x(f),t=h(f,"DIV",{class:!0});var P=D(t);s=h(P,"DIV",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-a0vly2"&&(s.innerHTML=l),o=x(P),p&&p.l(P),r=x(P),k&&k.l(P),c=x(P),I.l(P),P.forEach(u),this.h()},h(){Ge.title="Blog Writer - Oscar AI",a(s,"class","mb-8"),a(t,"class","max-w-6xl mx-auto")},m(f,C){V(f,e,C),V(f,t,C),i(t,s),i(t,o),p&&p.m(t,null),i(t,r),k&&k.m(t,null),i(t,c),d[y].m(t,null),v=!0},p(f,C){f[3]?p?p.p(f,C):(p=Ke(f),p.c(),p.m(t,r)):p&&(p.d(1),p=null),f[4]?k?k.p(f,C):(k=We(f),k.c(),k.m(t,c)):k&&(k.d(1),k=null);let P=y;y=T(f),y===P?d[y].p(f,C):(Ce(),ie(d[P],1,1,()=>{d[P]=null}),Pe(),I=d[y],I?I.p(f,C):(I=d[y]=w[y](f),I.c()),ne(I,1),I.m(t,null))},i(f){v||(ne(I),v=!0)},o(f){ie(I),v=!1},d(f){f&&(u(e),u(t)),p&&p.d(),k&&k.d(),d[y].d()}}}const Ut="oscar_style_profiles";function nt(n){const e=`# ${n.title}

${n.subtitle?`*${n.subtitle}*`:""}

${n.bodyHTML}

---
Tags: ${n.tags.join(", ")}
Created: ${new Date(n.createdAt).toLocaleString()}
`,t=new Blob([e],{type:"text/markdown"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=`${n.title.replace(/[^a-z0-9]/gi,"_")}.md`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}function Mt(n,e,t){let s;mt(n,yt,B=>t(35,s=B)),Ct.subscribe(B=>{});let l="",o,r=[],c=[],y=[],I=!0,v=!1,p="",k="",w="",d={title:"",subtitle:"",tags:"",prompt:"",includePhotos:!0,styleProfile:""},T=[],f="list",C=null;bt(async()=>{const B=localStorage.getItem(Ut);B&&t(7,T=JSON.parse(B));const G=new URLSearchParams(s.url.search);l=G.get("project")||"",t(5,w=l);const M=G.get("post"),Y=G.get("mode");if(await ye.projects.toArray(),w&&await P(),M&&Y==="edit"){const se=localStorage.getItem("oscar_blog_posts");if(se){const W=JSON.parse(se).find(fe=>fe.id===M);W&&(t(9,C=W),t(6,d={title:W.title,subtitle:W.subtitle||"",tags:W.tags?W.tags.join(", "):"",prompt:W.bodyContent||"",includePhotos:!0,styleProfile:""}),t(8,f="edit"))}}t(1,I=!1)});async function P(){try{o=await ye.projects.get(w),o&&(r=await ye.trees.where("projectId").equals(w).toArray(),c=await ye.notes.where("projectId").equals(w).toArray(),t(0,y=await E()))}catch(B){t(3,p="Failed to load project"),console.error(B)}}async function E(){const B=localStorage.getItem("oscar_blog_posts");return B?JSON.parse(B).filter(M=>M.projectId===w):[]}function m(B){const G=localStorage.getItem("oscar_blog_posts");let M=G?JSON.parse(G):[];M=M.filter(Y=>Y.projectId!==w),M=[...M,...B],localStorage.setItem("oscar_blog_posts",JSON.stringify(M))}async function L(){var G;if(!d.title.trim()){t(3,p="Please provide a title for the blog post");return}const B=settings.get();if(!B.groqApiKey){t(3,p="Please configure your Groq API key in Settings first.");return}t(2,v=!0),t(3,p=""),t(4,k="");try{let M="";o&&(M+=`PROJECT: ${o.name}
`,o.clientName&&(M+=`Client: ${o.clientName}
`),o.siteAddress&&(M+=`Location: ${o.siteAddress}

`)),r.length>0&&d.includePhotos&&(M+=`TREES SURVEYED:
`,r.slice(0,10).forEach(z=>{M+=`- ${z.number}: ${z.species} (${z.condition||"Not specified"})
`}),M+=`
`),c.length>0&&(M+=`FIELD NOTES:
`,c.slice(0,5).forEach(z=>{M+=`- ${z.title}: ${z.content.substring(0,200)}...
`}));let Y="You are a professional blog writer specializing in arboriculture and tree care. Write engaging, informative blog posts that are accessible to homeowners and property managers.";if(d.styleProfile&&T.length>0){const z=T.find(_e=>_e.id===d.styleProfile);z&&(Y=`You are writing in the following style:

`,Y+=`TONE: ${z.tone}
`,Y+=`STRUCTURE: ${z.structure}
`,Y+=`FORMATTING: ${z.formattingRules}
`,Y+=`VOCABULARY: ${z.vocabulary}
`)}const se=`Write a blog post with the following details:

Title: ${d.title}
Subtitle: ${d.subtitle||"A comprehensive guide"}

Context from our tree survey:
${M}

Additional instructions: ${d.prompt||"Write in an engaging, informative style suitable for property owners."}

Please write a complete, well-structured blog post with:
- An engaging introduction
- Main body sections
- Practical takeaways
- A conclusion

Use markdown formatting for headings, lists, and emphasis.`,he=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${B.groqApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-8b-instant",messages:[{role:"system",content:Y},{role:"user",content:se}],temperature:.7,max_tokens:2048})});if(!he.ok){const z=await he.json();throw new Error(((G=z.error)==null?void 0:G.message)||"Failed to generate blog post")}const fe=(await he.json()).choices[0].message.content,me={id:crypto.randomUUID(),projectId:w,title:d.title,subtitle:d.subtitle,bodyHTML:fe,tags:d.tags.split(",").map(z=>z.trim()).filter(z=>z),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(0,y=[...y,me]),m(y),t(4,k="Blog post generated successfully!"),t(9,C=me),t(8,f="edit"),t(6,d={title:"",subtitle:"",tags:"",prompt:"",includePhotos:!0,styleProfile:""})}catch(M){t(3,p=M instanceof Error?M.message:"Failed to generate blog post"),console.error(M)}finally{t(2,v=!1)}}function N(B){t(9,C=B),t(8,f="edit")}async function U(B){confirm("Are you sure you want to delete this blog post?")&&(t(0,y=y.filter(G=>G.id!==B.id)),m(y),t(9,C=null),t(8,f="list"))}async function b(){t(5,w=l||w),w&&await P()}function g(){w=qe(this),t(5,w)}const O=()=>{t(8,f="create"),t(9,C=null)},F=()=>t(8,f="list");function R(){d.title=this.value,t(6,d),t(7,T)}function H(){d.subtitle=this.value,t(6,d),t(7,T)}function q(){d.tags=this.value,t(6,d),t(7,T)}function de(){d.styleProfile=qe(this),t(6,d),t(7,T)}function ee(){d.includePhotos=this.checked,t(6,d),t(7,T)}function K(){d.prompt=this.value,t(6,d),t(7,T)}return[y,I,v,p,k,w,d,T,f,C,L,N,U,b,g,O,F,R,H,q,de,ee,K,B=>t(6,d.prompt+=B.detail.text,d),()=>t(8,f="create"),B=>N(B),B=>nt(B),B=>U(B),()=>nt(C),()=>{t(8,f="list"),t(9,C=null)}]}class Yt extends gt{constructor(e){super(),vt(this,e,Mt,Vt,_t,{},null,[-1,-1])}}export{Yt as component};

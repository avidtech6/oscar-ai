import{s as oe,n as K,d as c,r as ce,q as X,a as R,i as H,b as o,u as Z,l as i,m as ue,g as I,c as p,e as y,o as Y,f as S,j as C,h as m,t as O,p as de,v as fe,w as $,x as ee}from"../chunks/scheduler.DKaqMhG1.js";import{e as te}from"../chunks/each.C2d3_RSt.js";import{S as he,i as pe}from"../chunks/index.DlqHU1Qv.js";import{g as me}from"../chunks/entry.Be3j---l.js";import{d as Q}from"../chunks/index.BvaDNSI_.js";function le(n,t,l){const e=n.slice();return e[8]=t[l],e}function re(n){let t,l;return{c(){t=m("p"),l=O(n[4]),this.h()},l(e){t=p(e,"P",{class:!0});var s=y(t);l=S(s,n[4]),s.forEach(c),this.h()},h(){i(t,"class","text-red-600 text-sm mt-2")},m(e,s){H(e,t,s),o(t,l)},p(e,s){s&16&&R(l,e[4])},d(e){e&&c(t)}}}function _e(n){let t,l=te(n[0]),e=[];for(let s=0;s<l.length;s+=1)e[s]=ne(le(n,l,s));return{c(){t=m("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=p(s,"DIV",{class:!0});var a=y(t);for(let r=0;r<e.length;r+=1)e[r].l(a);a.forEach(c),this.h()},h(){i(t,"class","divide-y divide-gray-200")},m(s,a){H(s,t,a);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,null)},p(s,a){if(a&1){l=te(s[0]);let r;for(r=0;r<l.length;r+=1){const v=le(s,l,r);e[r]?e[r].p(v,a):(e[r]=ne(v),e[r].c(),e[r].m(t,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(s){s&&c(t),fe(e,s)}}}function ve(n){let t,l='<p class="mb-4">No projects yet. Create your first project above!</p>';return{c(){t=m("div"),t.innerHTML=l,this.h()},l(e){t=p(e,"DIV",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-17tddck"&&(t.innerHTML=l),this.h()},h(){i(t,"class","p-8 text-center text-gray-500")},m(e,s){H(e,t,s)},p:K,d(e){e&&c(t)}}}function ge(n){let t,l="<p>Loading projects...</p>";return{c(){t=m("div"),t.innerHTML=l,this.h()},l(e){t=p(e,"DIV",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-nt24bw"&&(t.innerHTML=l),this.h()},h(){i(t,"class","p-8 text-center text-gray-500")},m(e,s){H(e,t,s)},p:K,d(e){e&&c(t)}}}function se(n){let t,l,e=n[8].clientName+"",s;return{c(){t=m("p"),l=O("Client: "),s=O(e),this.h()},l(a){t=p(a,"P",{class:!0});var r=y(t);l=S(r,"Client: "),s=S(r,e),r.forEach(c),this.h()},h(){i(t,"class","text-sm text-gray-500 truncate")},m(a,r){H(a,t,r),o(t,l),o(t,s)},p(a,r){r&1&&e!==(e=a[8].clientName+"")&&R(s,e)},d(a){a&&c(t)}}}function ae(n){let t,l,e=n[8].siteAddress+"",s;return{c(){t=m("p"),l=O("Site: "),s=O(e),this.h()},l(a){t=p(a,"P",{class:!0});var r=y(t);l=S(r,"Site: "),s=S(r,e),r.forEach(c),this.h()},h(){i(t,"class","text-sm text-gray-500 truncate")},m(a,r){H(a,t,r),o(t,l),o(t,s)},p(a,r){r&1&&e!==(e=a[8].siteAddress+"")&&R(s,e)},d(a){a&&c(t)}}}function ne(n){let t,l,e,s,a=n[8].name+"",r,v,x,A,_,d,M=ie(n[8].updatedAt)+"",j,T,w,E,F,L,u=n[8].clientName&&se(n),f=n[8].siteAddress&&ae(n);return{c(){t=m("a"),l=m("div"),e=m("div"),s=m("h3"),r=O(a),v=C(),u&&u.c(),x=C(),f&&f.c(),A=C(),_=m("div"),d=m("p"),j=O(M),T=C(),w=ee("svg"),E=ee("path"),F=C(),this.h()},l(b){t=p(b,"A",{href:!0,class:!0});var k=y(t);l=p(k,"DIV",{class:!0});var N=y(l);e=p(N,"DIV",{class:!0});var V=y(e);s=p(V,"H3",{class:!0});var g=y(s);r=S(g,a),g.forEach(c),v=I(V),u&&u.l(V),x=I(V),f&&f.l(V),V.forEach(c),A=I(N),_=p(N,"DIV",{class:!0});var B=y(_);d=p(B,"P",{class:!0});var q=y(d);j=S(q,M),q.forEach(c),T=I(B),w=$(B,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var D=y(w);E=$(D,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(E).forEach(c),D.forEach(c),B.forEach(c),N.forEach(c),F=I(k),k.forEach(c),this.h()},h(){i(s,"class","text-lg font-medium text-gray-900 truncate"),i(e,"class","flex-1 min-w-0"),i(d,"class","text-sm text-gray-500"),i(E,"stroke-linecap","round"),i(E,"stroke-linejoin","round"),i(E,"stroke-width","2"),i(E,"d","M9 5l7 7-7 7"),i(w,"class","w-5 h-5 text-gray-400"),i(w,"fill","none"),i(w,"stroke","currentColor"),i(w,"viewBox","0 0 24 24"),i(_,"class","ml-4 flex items-center gap-4"),i(l,"class","flex items-center justify-between"),i(t,"href",L="/workspace/"+n[8].id),i(t,"class","block p-4 hover:bg-gray-50 transition-colors")},m(b,k){H(b,t,k),o(t,l),o(l,e),o(e,s),o(s,r),o(e,v),u&&u.m(e,null),o(e,x),f&&f.m(e,null),o(l,A),o(l,_),o(_,d),o(d,j),o(_,T),o(_,w),o(w,E),o(t,F)},p(b,k){k&1&&a!==(a=b[8].name+"")&&R(r,a),b[8].clientName?u?u.p(b,k):(u=se(b),u.c(),u.m(e,x)):u&&(u.d(1),u=null),b[8].siteAddress?f?f.p(b,k):(f=ae(b),f.c(),f.m(e,null)):f&&(f.d(1),f=null),k&1&&M!==(M=ie(b[8].updatedAt)+"")&&R(j,M),k&1&&L!==(L="/workspace/"+b[8].id)&&i(t,"href",L)},d(b){b&&c(t),u&&u.d(),f&&f.d()}}}function be(n){let t,l,e,s='<h1 class="text-2xl font-bold text-gray-900 mb-2">Your Projects</h1> <p class="text-gray-600">Manage your arboricultural surveys and reports</p>',a,r,v,x="Create New Project",A,_,d,M,j,T=n[2]?"Creating...":"Create Project",w,E,F,L,u,f,b='<h2 class="text-lg font-semibold">Existing Projects</h2>',k,N,V,g=n[4]&&re(n);function B(h,P){return h[3]?ge:h[0].length===0?ve:_e}let q=B(n),D=q(n);return{c(){t=C(),l=m("div"),e=m("div"),e.innerHTML=s,a=C(),r=m("div"),v=m("h2"),v.textContent=x,A=C(),_=m("form"),d=m("input"),M=C(),j=m("button"),w=O(T),F=C(),g&&g.c(),L=C(),u=m("div"),f=m("div"),f.innerHTML=b,k=C(),D.c(),this.h()},l(h){ue("svelte-1ousrmf",document.head).forEach(c),t=I(h),l=p(h,"DIV",{class:!0});var U=y(l);e=p(U,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1r2475j"&&(e.innerHTML=s),a=I(U),r=p(U,"DIV",{class:!0});var G=y(r);v=p(G,"H2",{class:!0,"data-svelte-h":!0}),Y(v)!=="svelte-vhkw6k"&&(v.textContent=x),A=I(G),_=p(G,"FORM",{class:!0});var z=y(_);d=p(z,"INPUT",{type:!0,placeholder:!0,class:!0}),M=I(z),j=p(z,"BUTTON",{type:!0,class:!0});var W=y(j);w=S(W,T),W.forEach(c),z.forEach(c),F=I(G),g&&g.l(G),G.forEach(c),L=I(U),u=p(U,"DIV",{class:!0});var J=y(u);f=p(J,"DIV",{class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-1uay8iw"&&(f.innerHTML=b),k=I(J),D.l(J),J.forEach(c),U.forEach(c),this.h()},h(){document.title="Dashboard - Oscar AI",i(e,"class","mb-8"),i(v,"class","text-lg font-semibold mb-4"),i(d,"type","text"),i(d,"placeholder","Project name (e.g., Oakwood Development)"),i(d,"class","input flex-1"),i(j,"type","submit"),j.disabled=E=n[2]||!n[1].trim(),i(j,"class","btn btn-primary"),i(_,"class","flex gap-3"),i(r,"class","card p-6 mb-8"),i(f,"class","p-4 border-b border-gray-200"),i(u,"class","card"),i(l,"class","max-w-6xl mx-auto")},m(h,P){H(h,t,P),H(h,l,P),o(l,e),o(l,a),o(l,r),o(r,v),o(r,A),o(r,_),o(_,d),X(d,n[1]),o(_,M),o(_,j),o(j,w),o(r,F),g&&g.m(r,null),o(l,L),o(l,u),o(u,f),o(u,k),D.m(u,null),N||(V=[Z(d,"input",n[6]),Z(_,"submit",n[5])],N=!0)},p(h,[P]){P&2&&d.value!==h[1]&&X(d,h[1]),P&4&&T!==(T=h[2]?"Creating...":"Create Project")&&R(w,T),P&6&&E!==(E=h[2]||!h[1].trim())&&(j.disabled=E),h[4]?g?g.p(h,P):(g=re(h),g.c(),g.m(r,null)):g&&(g.d(1),g=null),q===(q=B(h))&&D?D.p(h,P):(D.d(1),D=q(h),D&&(D.c(),D.m(u,null)))},i:K,o:K,d(h){h&&(c(t),c(l)),g&&g.d(),D.d(),N=!1,ce(V)}}}function ie(n){return new Date(n).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function ye(n,t,l){let e=[],s="",a=!1,r=!0,v="";de(async()=>{try{l(0,e=await Q.projects.toArray())}catch(d){l(4,v="Failed to load projects"),console.error(d)}finally{l(3,r=!1)}});async function x(){if(s.trim()){l(2,a=!0),l(4,v="");try{const d=await Q.projects.add({name:s.trim(),clientName:"",siteAddress:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),rootFolderId:"",driveFolderId:""});l(0,e=await Q.projects.toArray()),l(1,s=""),me(`/project/${d}`)}catch(d){l(4,v="Failed to create project"),console.error(d)}finally{l(2,a=!1)}}}function A(d){d.preventDefault(),x()}function _(){s=this.value,l(1,s)}return[e,s,a,r,v,A,_]}class Ie extends he{constructor(t){super(),pe(this,t,ye,be,oe,{})}}export{Ie as component};

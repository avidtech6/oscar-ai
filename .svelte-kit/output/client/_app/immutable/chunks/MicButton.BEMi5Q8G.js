import{s as j,n as N,d as p,l,i as _,u as V,c as v,e as w,g as R,y as B,h as S,j as F,B as A,C as D,a as P,b as E,f as U,t as I,o as q,w as x,x as y}from"./scheduler.DKaqMhG1.js";import{S as z,i as G}from"./index.DlqHU1Qv.js";function H(a){let e,t;return{c(){e=y("svg"),t=y("path"),this.h()},l(s){e=x(s,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var i=w(e);t=x(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),w(t).forEach(p),i.forEach(p),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"),l(e,"class","w-4 h-4"),l(e,"fill","none"),l(e,"stroke","currentColor"),l(e,"viewBox","0 0 24 24")},m(s,i){_(s,e,i),E(e,t)},d(s){s&&p(e)}}}function L(a){let e,t;return{c(){e=y("svg"),t=y("rect"),this.h()},l(s){e=x(s,"svg",{class:!0,fill:!0,viewBox:!0});var i=w(e);t=x(i,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),w(t).forEach(p),i.forEach(p),this.h()},h(){l(t,"x","6"),l(t,"y","6"),l(t,"width","12"),l(t,"height","12"),l(t,"rx","2"),l(e,"class","w-4 h-4"),l(e,"fill","currentColor"),l(e,"viewBox","0 0 24 24")},m(s,i){_(s,e,i),E(e,t)},d(s){s&&p(e)}}}function M(a){let e,t;return{c(){e=S("span"),t=I(a[1]),this.h()},l(s){e=v(s,"SPAN",{class:!0});var i=w(e);t=U(i,a[1]),i.forEach(p),this.h()},h(){l(e,"class","text-xs text-red-500 ml-2")},m(s,i){_(s,e,i),E(e,t)},p(s,i){i&2&&P(t,s[1])},d(s){s&&p(e)}}}function T(a){let e,t="Listening...";return{c(){e=S("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1w8bj2j"&&(e.textContent=t),this.h()},h(){l(e,"class","text-xs text-red-500 ml-2 animate-pulse")},m(s,i){_(s,e,i)},d(s){s&&p(e)}}}function O(a){let e,t,s,i,f,n,d,g;function m(o,r){return o[0]?L:H}let b=m(a),h=b(a),c=a[1]&&M(a),u=a[0]&&T();return{c(){e=S("button"),h.c(),i=F(),c&&c.c(),f=F(),u&&u.c(),n=B(),this.h()},l(o){e=v(o,"BUTTON",{type:!0,class:!0,title:!0});var r=w(e);h.l(r),r.forEach(p),i=R(o),c&&c.l(o),f=R(o),u&&u.l(o),n=B(),this.h()},h(){l(e,"type","button"),e.disabled=!a[2],l(e,"class",t="p-2 rounded-lg transition-colors flex-shrink-0 "+(a[0]?"bg-red-500 text-white animate-pulse":"text-gray-500 hover:text-green-700 hover:bg-gray-100")),l(e,"title",s=a[0]?"Stop recording":a[2]?"Voice input":"Voice input not supported")},m(o,r){_(o,e,r),h.m(e,null),_(o,i,r),c&&c.m(o,r),_(o,f,r),u&&u.m(o,r),_(o,n,r),d||(g=V(e,"click",a[3]),d=!0)},p(o,[r]){b!==(b=m(o))&&(h.d(1),h=b(o),h&&(h.c(),h.m(e,null))),r&1&&t!==(t="p-2 rounded-lg transition-colors flex-shrink-0 "+(o[0]?"bg-red-500 text-white animate-pulse":"text-gray-500 hover:text-green-700 hover:bg-gray-100"))&&l(e,"class",t),r&1&&s!==(s=o[0]?"Stop recording":o[2]?"Voice input":"Voice input not supported")&&l(e,"title",s),o[1]?c?c.p(o,r):(c=M(o),c.c(),c.m(f.parentNode,f)):c&&(c.d(1),c=null),o[0]?u||(u=T(),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i:N,o:N,d(o){o&&(p(e),p(i),p(f),p(n)),h.d(),c&&c.d(o),u&&u.d(o),d=!1,g()}}}function J(a,e,t){const s=A();let i=!1,f="",n=null,d="",g="",m=null;const b=window.SpeechRecognition||window.webkitSpeechRecognition,h=!!b;D(()=>{n&&n.stop(),m&&m.getTracks().forEach(r=>r.stop())});async function c(){i?o():await u()}async function u(){if(t(1,f=""),!h){t(1,f="Speech recognition not supported in this browser");return}try{m=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),n=new b,n.continuous=!0,n.interimResults=!0,n.lang="en-US",n.onstart=()=>{t(0,i=!0),d="",g=""},n.onresult=r=>{g="";for(let k=r.resultIndex;k<r.results.length;k++){const C=r.results[k][0].transcript;r.results[k].isFinal?d+=C+" ":g+=C}(d||g)&&s("transcript",{text:d+g,isFinal:r.results[r.results.length-1].isFinal})},n.onerror=r=>{console.error("Speech recognition error:",r.error),r.error==="not-allowed"?t(1,f="Microphone access denied"):r.error==="no-speech"?t(1,f="No speech detected"):t(1,f=r.error),o()},n.onend=()=>{if(i)try{n==null||n.start()}catch(r){console.error("Failed to restart recognition:",r)}},n.start()}catch(r){console.error("Failed to start recording:",r),r instanceof Error&&(r.name==="NotAllowedError"?t(1,f="Microphone access denied"):r.name==="NotFoundError"?t(1,f="No microphone found"):t(1,f=r.message))}}function o(){n&&(n.stop(),n=null),m&&(m.getTracks().forEach(r=>r.stop()),m=null),t(0,i=!1),d.trim()&&s("transcript",{text:d.trim(),isFinal:!0})}return[i,f,h,c]}class W extends z{constructor(e){super(),G(this,e,J,O,j,{})}}export{W as M};

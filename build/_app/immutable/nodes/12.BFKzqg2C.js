import{s as Ms,n as ns,d as l,r as Ls,q as Nt,a as X,l as t,i as $e,b as e,u as _e,m as Ns,g as n,c as s,e as c,o as g,f as Z,j as i,h as a,t as $,p as Os}from"../chunks/scheduler.DKaqMhG1.js";import{g as Hs}from"../chunks/globals.D0QH3NT1.js";import{S as qs,i as Rs}from"../chunks/index.DlqHU1Qv.js";import{s as rs,d as As}from"../chunks/settings.a3gRd5qY.js";import{i as Ss,c as Ks,g as Fs}from"../chunks/backend.Fb4B5ysz.js";import{c as Ys,b as Gs,d as Q,e as Es,f as zs,s as Js,h as Ws,i as Qs,j as ls,k as Xs}from"../chunks/index.BvaDNSI_.js";async function Zs(){const r=new Date,d=await Ys({name:"[DUMMY] Alpha Site Survey",description:"BS5837 tree survey for residential development at Alpha Site. This is a dummy project for testing purposes.",location:"123 Test Lane, Testing Town, TT1 1TT",client:"Test Developments Ltd",isDummy:!0}),o=await Gs({title:"[DUMMY] Inspect Oak at North Gate",content:"Conduct detailed inspection of mature oak tree at north gate entrance. Assess condition, measure DBH, and document any visible defects or signs of disease.",status:"todo",priority:"high",dueDate:new Date(Date.now()+24*60*60*1e3),projectId:d,tags:["dummy","sample","test","inspection"],isDummy:!0}),f=crypto.randomUUID();await Q.tasks.add({id:f,title:"[DUMMY] Measure Root Protection Area",content:"Calculate and mark the Root Protection Area (RPA) based on BS5837 guidelines.",status:"todo",priority:"medium",projectId:d,tags:["dummy","sample","test","rpa"],isDummy:!0,createdAt:r,updatedAt:r}),await Es({sourceId:f,sourceType:"task",targetId:o,targetType:"task",relationType:"subtask"});const h=await zs({title:"[DUMMY] Client Meeting Notes",content:"Meeting with client regarding the Alpha Site survey. Key points: Client concerned about T1 Oak, requested detailed assessment of Category A trees, wants PDF report by end of month. Follow-up: Schedule site visit, complete survey, prepare BS5837 report.",tags:["dummy","sample","test","meeting"],type:"general",projectId:d,isDummy:!0});await Es({sourceId:o,sourceType:"task",targetId:h,targetType:"note",relationType:"context"});const u="BS5837 Arboricultural Impact Assessment - Alpha Site";await Js({projectId:d,title:"[DUMMY] BS5837 Arboricultural Impact Assessment",type:"bs5837",pdfBlob:new Blob([u],{type:"text/plain"}),isDummy:!0}),await Ws({projectId:d,number:"T1",species:"Oak",scientificName:"Quercus robur",DBH:650,height:14,age:"Mature",category:"A",condition:"Good",photos:[],isDummy:!0}),await Q.notes.add({id:crypto.randomUUID(),title:"[DUMMY] Update on Survey Technology",content:"Latest developments in tree survey technology including LIDAR, drone photography, and AI-powered analysis.",tags:["dummy","sample","test","blog"],type:"general",isDummy:!0,createdAt:r,updatedAt:r}),await Q.notes.add({id:crypto.randomUUID(),title:"[DUMMY] Survey Workflow",content:"Survey workflow: Client Request -> Site Visit -> Tree Survey -> Data Analysis -> Report Preparation -> Client Delivery",tags:["dummy","sample","test","diagram"],type:"general",isDummy:!0,createdAt:r,updatedAt:r}),await Q.notes.add({id:crypto.randomUUID(),title:"[DUMMY] Site Visit Audio Notes",content:"",transcript:"Arrived at site at 9am. Weather: Overcast, dry. T1 Oak in good condition with no visible signs of disease. Crown spread approximately 12 meters. Client concerned about T1 oak. Will complete full survey tomorrow.",tags:["dummy","sample","test","voice"],type:"voice",projectId:d,taskId:o,isDummy:!0,createdAt:r,updatedAt:r});const b=[{role:"user",content:"Show me my tasks",timestamp:new Date(Date.now()-36e5)},{role:"oscar",content:"I found 1 task: [DUMMY] Inspect Oak at North Gate (High Priority)",timestamp:new Date(Date.now()-35e5)},{role:"user",content:"Add a subtask",timestamp:new Date(Date.now()-18e5)},{role:"oscar",content:"Added subtask: [DUMMY] Measure Root Protection Area",timestamp:new Date(Date.now()-17e5)}];for(const k of b)await Qs(k)}const{document:Ts}=Hs;function Us(r){let d,o="Clear",f,h;return{c(){d=a("button"),d.textContent=o,this.h()},l(u){d=s(u,"BUTTON",{class:!0,"data-svelte-h":!0}),g(d)!=="svelte-1jsjjix"&&(d.textContent=o),this.h()},h(){t(d,"class","btn btn-secondary")},m(u,b){$e(u,d,b),f||(h=_e(d,"click",r[15]),f=!0)},p:ns,d(u){u&&l(d),f=!1,h()}}}function Vs(r){let d,o,f;return{c(){d=a("div"),o=$(r[6]),this.h()},l(h){d=s(h,"DIV",{class:!0});var u=c(d);o=Z(u,r[6]),u.forEach(l),this.h()},h(){t(d,"class",f="p-3 rounded-lg "+(r[6].includes("Connected")?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"))},m(h,u){$e(h,d,u),e(d,o)},p(h,u){u&64&&X(o,h[6]),u&64&&f!==(f="p-3 rounded-lg "+(h[6].includes("Connected")?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"))&&t(d,"class",f)},d(h){h&&l(d)}}}function js(r){let d,o,f="Current Dummy Data",h,u,b,k,oe=r[10].projects+"",R,q,K,F="Projects",T,w,U,ve=r[10].tasks+"",ce,V,ee,re="Tasks",Se,Y,S,v=r[10].notes+"",C,le,P,G="Notes",D,m,B,A=r[10].trees+"",_,E,j,Oe="Trees",te,M,ne,me=r[10].reports+"",xe,He,L,he="Reports",qe,z,J=r[11]?"Clearing...":"Clear All Dummy Data",ie,et,tt;return{c(){d=a("div"),o=a("h3"),o.textContent=f,h=i(),u=a("div"),b=a("div"),k=a("div"),R=$(oe),q=i(),K=a("div"),K.textContent=F,T=i(),w=a("div"),U=a("div"),ce=$(ve),V=i(),ee=a("div"),ee.textContent=re,Se=i(),Y=a("div"),S=a("div"),C=$(v),le=i(),P=a("div"),P.textContent=G,D=i(),m=a("div"),B=a("div"),_=$(A),E=i(),j=a("div"),j.textContent=Oe,te=i(),M=a("div"),ne=a("div"),xe=$(me),He=i(),L=a("div"),L.textContent=he,qe=i(),z=a("button"),ie=$(J),this.h()},l(y){d=s(y,"DIV",{class:!0});var x=c(d);o=s(x,"H3",{class:!0,"data-svelte-h":!0}),g(o)!=="svelte-nwkl7n"&&(o.textContent=f),h=n(x),u=s(x,"DIV",{class:!0});var se=c(u);b=s(se,"DIV",{class:!0});var Ee=c(b);k=s(Ee,"DIV",{class:!0});var ge=c(k);R=Z(ge,oe),ge.forEach(l),q=n(Ee),K=s(Ee,"DIV",{class:!0,"data-svelte-h":!0}),g(K)!=="svelte-25jn51"&&(K.textContent=F),Ee.forEach(l),T=n(se),w=s(se,"DIV",{class:!0});var Re=c(w);U=s(Re,"DIV",{class:!0});var st=c(U);ce=Z(st,ve),st.forEach(l),V=n(Re),ee=s(Re,"DIV",{class:!0,"data-svelte-h":!0}),g(ee)!=="svelte-1575pxr"&&(ee.textContent=re),Re.forEach(l),Se=n(se),Y=s(se,"DIV",{class:!0});var ae=c(Y);S=s(ae,"DIV",{class:!0});var de=c(S);C=Z(de,v),de.forEach(l),le=n(ae),P=s(ae,"DIV",{class:!0,"data-svelte-h":!0}),g(P)!=="svelte-1d19oko"&&(P.textContent=G),ae.forEach(l),D=n(se),m=s(se,"DIV",{class:!0});var be=c(m);B=s(be,"DIV",{class:!0});var Ke=c(B);_=Z(Ke,A),Ke.forEach(l),E=n(be),j=s(be,"DIV",{class:!0,"data-svelte-h":!0}),g(j)!=="svelte-uhsuz0"&&(j.textContent=Oe),be.forEach(l),te=n(se),M=s(se,"DIV",{class:!0});var Te=c(M);ne=s(Te,"DIV",{class:!0});var ue=c(ne);xe=Z(ue,me),ue.forEach(l),He=n(Te),L=s(Te,"DIV",{class:!0,"data-svelte-h":!0}),g(L)!=="svelte-9eh8lq"&&(L.textContent=he),Te.forEach(l),se.forEach(l),x.forEach(l),qe=n(y),z=s(y,"BUTTON",{class:!0});var Ue=c(z);ie=Z(Ue,J),Ue.forEach(l),this.h()},h(){t(o,"class","font-medium text-blue-900 mb-2"),t(k,"class","font-bold text-lg"),t(K,"class","text-gray-600"),t(b,"class","text-center p-2 bg-white rounded"),t(U,"class","font-bold text-lg"),t(ee,"class","text-gray-600"),t(w,"class","text-center p-2 bg-white rounded"),t(S,"class","font-bold text-lg"),t(P,"class","text-gray-600"),t(Y,"class","text-center p-2 bg-white rounded"),t(B,"class","font-bold text-lg"),t(j,"class","text-gray-600"),t(m,"class","text-center p-2 bg-white rounded"),t(ne,"class","font-bold text-lg"),t(L,"class","text-gray-600"),t(M,"class","text-center p-2 bg-white rounded"),t(u,"class","grid grid-cols-2 md:grid-cols-5 gap-2 text-sm"),t(d,"class","p-4 bg-blue-50 rounded-lg"),z.disabled=r[11],t(z,"class","btn bg-red-600 text-white hover:bg-red-700")},m(y,x){$e(y,d,x),e(d,o),e(d,h),e(d,u),e(u,b),e(b,k),e(k,R),e(b,q),e(b,K),e(u,T),e(u,w),e(w,U),e(U,ce),e(w,V),e(w,ee),e(u,Se),e(u,Y),e(Y,S),e(S,C),e(Y,le),e(Y,P),e(u,D),e(u,m),e(m,B),e(B,_),e(m,E),e(m,j),e(u,te),e(u,M),e(M,ne),e(ne,xe),e(M,He),e(M,L),$e(y,qe,x),$e(y,z,x),e(z,ie),et||(tt=_e(z,"click",r[13]),et=!0)},p(y,x){x&1024&&oe!==(oe=y[10].projects+"")&&X(R,oe),x&1024&&ve!==(ve=y[10].tasks+"")&&X(ce,ve),x&1024&&v!==(v=y[10].notes+"")&&X(C,v),x&1024&&A!==(A=y[10].trees+"")&&X(_,A),x&1024&&me!==(me=y[10].reports+"")&&X(xe,me),x&2048&&J!==(J=y[11]?"Clearing...":"Clear All Dummy Data")&&X(ie,J),x&2048&&(z.disabled=y[11])},d(y){y&&(l(d),l(qe),l(z)),et=!1,tt()}}}function $s(r){let d,o,f,h="Settings",u,b,k,oe="AI Configuration",R,q,K="Configure the Groq API for AI-powered features including chat assistant and voice transcription.",F,T,w,U,ve="Groq API Key",ce,V,ee,re,Se='Get your free API key from <a href="https://console.groq.com" target="_blank" rel="noopener noreferrer" class="text-forest-600 hover:underline">console.groq.com</a>',Y,S,v,C=r[2]?"Saving...":r[3]?"Saved!":"Save API Key",le,P,G,D,m,B="Data Storage",A,_,E,j,Oe="Current Backend:",te,M,ne=r[4]==="pocketbase"?"PocketBase (Cloud)":"Local (Browser)",me,xe,He,L,he,qe=`<span class="text-2xl">üíæ</span> <div><h3 class="font-medium">Local Browser Storage</h3> <p class="text-sm text-gray-600">All your project data, notes, and reports are stored locally in your browser using IndexedDB. 
						Data never leaves your device.</p></div>`,z,J,ie,et="üì§",tt,y,x,se="Export & Import",Ee,ge,Re="Export your projects as JSON files for backup or sharing. Import previously exported projects to restore your data.",st,ae,de,be=r[7]?"Exporting...":"Export All Data",Ke,Te,ue,Ue=r[8]?"Importing...":"Import Data",bt,Ot,we,Ht,ye,Fe,is="Cloud Backend (Optional)",qt,Ye,ds="Connect to a PocketBase backend to sync your data across devices and enable user accounts.",Rt,pe,Ce,Ve,cs="PocketBase URL",Kt,fe,Ft,Ge,us="Enter your PocketBase backend URL (e.g., from Railway deployment)",Yt,yt,Ie,vt=r[5]?"Testing...":"Connect Backend",Dt,_t,Gt,je,ze,ps="AI Services",zt,Pe,Be,Je,fs='<span class="text-xl">ü§ñ</span> <span>Groq AI (Chat)</span>',Jt,at,mt=r[0]?"Configured":"Not configured",xt,Wt,Me,We,vs='<span class="text-xl">üéôÔ∏è</span> <span>Groq Whisper (Transcription)</span>',Qt,ot,ht=r[0]?"Configured":"Not configured",wt,Xt,De,Qe,ms="Development & Testing",Zt,Xe,hs="Enable dummy data for development and testing purposes. Dummy items are fully functional and can be used to test all features.",$t,ke,Le,rt,gs='<h3 class="font-medium">Enable Dummy Data</h3> <p class="text-sm text-gray-600">Show dummy data in the app for testing</p>',es,Ne,Ae,ts,gt,ss,as,Ze,bs=`<h2 class="text-lg font-semibold mb-4">About Oscar AI</h2> <div class="space-y-2 text-sm text-gray-600"><p><strong>Version:</strong> 1.0.0 (Dev)</p> <p><strong>Platform:</strong> Cloudflare Pages (Static)</p> <p><strong>Storage:</strong> IndexedDB (Browser Local)</p> <p class="pt-2">Oscar AI is a personal arboricultural notebook and assistant for UK tree surveyors 
				and arboricultural consultants. This is the development version with local-only data storage.</p></div>`,os,ys,N=r[0]&&Us(r),O=r[6]&&Vs(r),H=(r[10].projects>0||r[10].tasks>0||r[10].notes>0||r[10].trees>0||r[10].reports>0)&&js(r);return{c(){d=i(),o=a("div"),f=a("h1"),f.textContent=h,u=i(),b=a("div"),k=a("h2"),k.textContent=oe,R=i(),q=a("p"),q.textContent=K,F=i(),T=a("div"),w=a("div"),U=a("label"),U.textContent=ve,ce=i(),V=a("input"),ee=i(),re=a("p"),re.innerHTML=Se,Y=i(),S=a("div"),v=a("button"),le=$(C),P=i(),N&&N.c(),G=i(),D=a("div"),m=a("h2"),m.textContent=B,A=i(),_=a("div"),E=a("div"),j=a("span"),j.textContent=Oe,te=i(),M=a("span"),me=$(ne),He=i(),L=a("div"),he=a("div"),he.innerHTML=qe,z=i(),J=a("div"),ie=a("span"),ie.textContent=et,tt=i(),y=a("div"),x=a("h3"),x.textContent=se,Ee=i(),ge=a("p"),ge.textContent=Re,st=i(),ae=a("div"),de=a("button"),Ke=$(be),Te=i(),ue=a("label"),bt=$(Ue),Ot=i(),we=a("input"),Ht=i(),ye=a("div"),Fe=a("h2"),Fe.textContent=is,qt=i(),Ye=a("p"),Ye.textContent=ds,Rt=i(),pe=a("div"),Ce=a("div"),Ve=a("label"),Ve.textContent=cs,Kt=i(),fe=a("input"),Ft=i(),Ge=a("p"),Ge.textContent=us,Yt=i(),O&&O.c(),yt=i(),Ie=a("button"),Dt=$(vt),Gt=i(),je=a("div"),ze=a("h2"),ze.textContent=ps,zt=i(),Pe=a("div"),Be=a("div"),Je=a("div"),Je.innerHTML=fs,Jt=i(),at=a("span"),xt=$(mt),Wt=i(),Me=a("div"),We=a("div"),We.innerHTML=vs,Qt=i(),ot=a("span"),wt=$(ht),Xt=i(),De=a("div"),Qe=a("h2"),Qe.textContent=ms,Zt=i(),Xe=a("p"),Xe.textContent=hs,$t=i(),ke=a("div"),Le=a("div"),rt=a("div"),rt.innerHTML=gs,es=i(),Ne=a("label"),Ae=a("input"),ts=i(),gt=a("div"),ss=i(),H&&H.c(),as=i(),Ze=a("div"),Ze.innerHTML=bs,this.h()},l(p){Ns("svelte-pd46q8",Ts.head).forEach(l),d=n(p),o=s(p,"DIV",{class:!0});var W=c(o);f=s(W,"H1",{class:!0,"data-svelte-h":!0}),g(f)!=="svelte-w1f782"&&(f.textContent=h),u=n(W),b=s(W,"DIV",{class:!0});var lt=c(b);k=s(lt,"H2",{class:!0,"data-svelte-h":!0}),g(k)!=="svelte-1fhu7ux"&&(k.textContent=oe),R=n(lt),q=s(lt,"P",{class:!0,"data-svelte-h":!0}),g(q)!=="svelte-1vtstg7"&&(q.textContent=K),F=n(lt),T=s(lt,"DIV",{class:!0});var Ct=c(T);w=s(Ct,"DIV",{});var nt=c(w);U=s(nt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(U)!=="svelte-155oxvz"&&(U.textContent=ve),ce=n(nt),V=s(nt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ee=n(nt),re=s(nt,"P",{class:!0,"data-svelte-h":!0}),g(re)!=="svelte-ganwab"&&(re.innerHTML=Se),nt.forEach(l),Y=n(Ct),S=s(Ct,"DIV",{class:!0});var It=c(S);v=s(It,"BUTTON",{class:!0});var Ds=c(v);le=Z(Ds,C),Ds.forEach(l),P=n(It),N&&N.l(It),It.forEach(l),Ct.forEach(l),lt.forEach(l),G=n(W),D=s(W,"DIV",{class:!0});var it=c(D);m=s(it,"H2",{class:!0,"data-svelte-h":!0}),g(m)!=="svelte-um09i2"&&(m.textContent=B),A=n(it),_=s(it,"DIV",{class:!0});var _s=c(_);E=s(_s,"DIV",{class:!0});var kt=c(E);j=s(kt,"SPAN",{class:!0,"data-svelte-h":!0}),g(j)!=="svelte-1p6h8zd"&&(j.textContent=Oe),te=n(kt),M=s(kt,"SPAN",{class:!0});var xs=c(M);me=Z(xs,ne),xs.forEach(l),kt.forEach(l),_s.forEach(l),He=n(it),L=s(it,"DIV",{class:!0});var At=c(L);he=s(At,"DIV",{class:!0,"data-svelte-h":!0}),g(he)!=="svelte-178cynr"&&(he.innerHTML=qe),z=n(At),J=s(At,"DIV",{class:!0});var St=c(J);ie=s(St,"SPAN",{class:!0,"data-svelte-h":!0}),g(ie)!=="svelte-u85tsi"&&(ie.textContent=et),tt=n(St),y=s(St,"DIV",{class:!0});var dt=c(y);x=s(dt,"H3",{class:!0,"data-svelte-h":!0}),g(x)!=="svelte-1663lwd"&&(x.textContent=se),Ee=n(dt),ge=s(dt,"P",{class:!0,"data-svelte-h":!0}),g(ge)!=="svelte-kwtezn"&&(ge.textContent=Re),st=n(dt),ae=s(dt,"DIV",{class:!0});var Et=c(ae);de=s(Et,"BUTTON",{class:!0});var ws=c(de);Ke=Z(ws,be),ws.forEach(l),Te=n(Et),ue=s(Et,"LABEL",{class:!0});var Tt=c(ue);bt=Z(Tt,Ue),Ot=n(Tt),we=s(Tt,"INPUT",{type:!0,accept:!0,class:!0}),Tt.forEach(l),Et.forEach(l),dt.forEach(l),St.forEach(l),At.forEach(l),it.forEach(l),Ht=n(W),ye=s(W,"DIV",{class:!0});var ct=c(ye);Fe=s(ct,"H2",{class:!0,"data-svelte-h":!0}),g(Fe)!=="svelte-1yf7s6d"&&(Fe.textContent=is),qt=n(ct),Ye=s(ct,"P",{class:!0,"data-svelte-h":!0}),g(Ye)!=="svelte-1q0iug5"&&(Ye.textContent=ds),Rt=n(ct),pe=s(ct,"DIV",{class:!0});var ut=c(pe);Ce=s(ut,"DIV",{});var pt=c(Ce);Ve=s(pt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(Ve)!=="svelte-ep65vx"&&(Ve.textContent=cs),Kt=n(pt),fe=s(pt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Ft=n(pt),Ge=s(pt,"P",{class:!0,"data-svelte-h":!0}),g(Ge)!=="svelte-1aveuxn"&&(Ge.textContent=us),pt.forEach(l),Yt=n(ut),O&&O.l(ut),yt=n(ut),Ie=s(ut,"BUTTON",{class:!0});var Cs=c(Ie);Dt=Z(Cs,vt),Cs.forEach(l),ut.forEach(l),ct.forEach(l),Gt=n(W),je=s(W,"DIV",{class:!0});var Ut=c(je);ze=s(Ut,"H2",{class:!0,"data-svelte-h":!0}),g(ze)!=="svelte-bvsilf"&&(ze.textContent=ps),zt=n(Ut),Pe=s(Ut,"DIV",{class:!0});var Vt=c(Pe);Be=s(Vt,"DIV",{class:!0});var jt=c(Be);Je=s(jt,"DIV",{class:!0,"data-svelte-h":!0}),g(Je)!=="svelte-1gp3h6x"&&(Je.innerHTML=fs),Jt=n(jt),at=s(jt,"SPAN",{class:!0});var Is=c(at);xt=Z(Is,mt),Is.forEach(l),jt.forEach(l),Wt=n(Vt),Me=s(Vt,"DIV",{class:!0});var Pt=c(Me);We=s(Pt,"DIV",{class:!0,"data-svelte-h":!0}),g(We)!=="svelte-1q72mkr"&&(We.innerHTML=vs),Qt=n(Pt),ot=s(Pt,"SPAN",{class:!0});var ks=c(ot);wt=Z(ks,ht),ks.forEach(l),Pt.forEach(l),Vt.forEach(l),Ut.forEach(l),Xt=n(W),De=s(W,"DIV",{class:!0});var ft=c(De);Qe=s(ft,"H2",{class:!0,"data-svelte-h":!0}),g(Qe)!=="svelte-rz79la"&&(Qe.textContent=ms),Zt=n(ft),Xe=s(ft,"P",{class:!0,"data-svelte-h":!0}),g(Xe)!=="svelte-13s0h46"&&(Xe.textContent=hs),$t=n(ft),ke=s(ft,"DIV",{class:!0});var Bt=c(ke);Le=s(Bt,"DIV",{class:!0});var Mt=c(Le);rt=s(Mt,"DIV",{"data-svelte-h":!0}),g(rt)!=="svelte-1pnq7hh"&&(rt.innerHTML=gs),es=n(Mt),Ne=s(Mt,"LABEL",{class:!0});var Lt=c(Ne);Ae=s(Lt,"INPUT",{type:!0,class:!0}),ts=n(Lt),gt=s(Lt,"DIV",{class:!0}),c(gt).forEach(l),Lt.forEach(l),Mt.forEach(l),ss=n(Bt),H&&H.l(Bt),Bt.forEach(l),ft.forEach(l),as=n(W),Ze=s(W,"DIV",{class:!0,"data-svelte-h":!0}),g(Ze)!=="svelte-hl6dmd"&&(Ze.innerHTML=bs),W.forEach(l),this.h()},h(){Ts.title="Settings - Oscar AI",t(f,"class","text-2xl font-bold text-gray-900 mb-6"),t(k,"class","text-lg font-semibold mb-4"),t(q,"class","text-sm text-gray-600 mb-4"),t(U,"for","apiKey"),t(U,"class","block text-sm font-medium text-gray-700 mb-1"),t(V,"id","apiKey"),t(V,"type","password"),t(V,"placeholder","gsk_..."),t(V,"class","input w-full"),t(re,"class","text-xs text-gray-500 mt-1"),v.disabled=r[2],t(v,"class","btn btn-primary"),t(S,"class","flex items-center gap-3"),t(T,"class","space-y-4"),t(b,"class","card p-6 mb-6"),t(m,"class","text-lg font-semibold mb-4"),t(j,"class","text-sm font-medium"),t(M,"class",xe="px-2 py-1 text-xs rounded-full "+(r[4]==="pocketbase"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800")),t(E,"class","flex items-center justify-between"),t(_,"class","mb-4 p-3 bg-gray-50 rounded-lg"),t(he,"class","flex items-start gap-3"),t(ie,"class","text-2xl"),t(x,"class","font-medium"),t(ge,"class","text-sm text-gray-600 mb-3"),de.disabled=r[7],t(de,"class","btn btn-primary text-sm"),t(we,"type","file"),t(we,"accept",".json"),t(we,"class","hidden"),we.disabled=r[8],t(ue,"class","btn btn-secondary text-sm cursor-pointer"),t(ae,"class","flex gap-3"),t(y,"class","flex-1"),t(J,"class","flex items-start gap-3"),t(L,"class","space-y-4"),t(D,"class","card p-6 mb-6"),t(Fe,"class","text-lg font-semibold mb-4"),t(Ye,"class","text-sm text-gray-600 mb-4"),t(Ve,"for","pbUrl"),t(Ve,"class","block text-sm font-medium text-gray-700 mb-1"),t(fe,"id","pbUrl"),t(fe,"type","url"),t(fe,"placeholder","https://your-backend.railway.app"),t(fe,"class","input w-full"),t(Ge,"class","text-xs text-gray-500 mt-1"),Ie.disabled=_t=r[2]||r[5],t(Ie,"class","btn btn-secondary"),t(pe,"class","space-y-4"),t(ye,"class","card p-6 mb-6"),t(ze,"class","text-lg font-semibold mb-4"),t(Je,"class","flex items-center gap-3"),t(at,"class","text-sm text-gray-600"),t(Be,"class","flex items-center justify-between p-3 bg-gray-50 rounded-lg"),t(We,"class","flex items-center gap-3"),t(ot,"class","text-sm text-gray-600"),t(Me,"class","flex items-center justify-between p-3 bg-gray-50 rounded-lg"),t(Pe,"class","space-y-3"),t(je,"class","card p-6 mb-6"),t(Qe,"class","text-lg font-semibold mb-4"),t(Xe,"class","text-sm text-gray-600 mb-4"),t(Ae,"type","checkbox"),t(Ae,"class","sr-only peer"),t(gt,"class","w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-forest-600"),t(Ne,"class","relative inline-flex items-center cursor-pointer"),t(Le,"class","flex items-center justify-between p-4 bg-gray-50 rounded-lg"),t(ke,"class","space-y-4"),t(De,"class","card p-6 mb-6"),t(Ze,"class","card p-6 mb-6"),t(o,"class","max-w-2xl mx-auto")},m(p,I){$e(p,d,I),$e(p,o,I),e(o,f),e(o,u),e(o,b),e(b,k),e(b,R),e(b,q),e(b,F),e(b,T),e(T,w),e(w,U),e(w,ce),e(w,V),Nt(V,r[0]),e(w,ee),e(w,re),e(T,Y),e(T,S),e(S,v),e(v,le),e(S,P),N&&N.m(S,null),e(o,G),e(o,D),e(D,m),e(D,A),e(D,_),e(_,E),e(E,j),e(E,te),e(E,M),e(M,me),e(D,He),e(D,L),e(L,he),e(L,z),e(L,J),e(J,ie),e(J,tt),e(J,y),e(y,x),e(y,Ee),e(y,ge),e(y,st),e(y,ae),e(ae,de),e(de,Ke),e(ae,Te),e(ae,ue),e(ue,bt),e(ue,Ot),e(ue,we),e(o,Ht),e(o,ye),e(ye,Fe),e(ye,qt),e(ye,Ye),e(ye,Rt),e(ye,pe),e(pe,Ce),e(Ce,Ve),e(Ce,Kt),e(Ce,fe),Nt(fe,r[1]),e(Ce,Ft),e(Ce,Ge),e(pe,Yt),O&&O.m(pe,null),e(pe,yt),e(pe,Ie),e(Ie,Dt),e(o,Gt),e(o,je),e(je,ze),e(je,zt),e(je,Pe),e(Pe,Be),e(Be,Je),e(Be,Jt),e(Be,at),e(at,xt),e(Pe,Wt),e(Pe,Me),e(Me,We),e(Me,Qt),e(Me,ot),e(ot,wt),e(o,Xt),e(o,De),e(De,Qe),e(De,Zt),e(De,Xe),e(De,$t),e(De,ke),e(ke,Le),e(Le,rt),e(Le,es),e(Le,Ne),e(Ne,Ae),Ae.checked=r[9],e(Ne,ts),e(Ne,gt),e(ke,ss),H&&H.m(ke,null),e(o,as),e(o,Ze),os||(ys=[_e(V,"input",r[18]),_e(v,"click",r[14]),_e(de,"click",r[16]),_e(we,"change",r[17]),_e(fe,"input",r[19]),_e(Ie,"click",r[14]),_e(Ae,"change",r[20]),_e(Ae,"change",r[12])],os=!0)},p(p,[I]){I&1&&V.value!==p[0]&&Nt(V,p[0]),I&12&&C!==(C=p[2]?"Saving...":p[3]?"Saved!":"Save API Key")&&X(le,C),I&4&&(v.disabled=p[2]),p[0]?N?N.p(p,I):(N=Us(p),N.c(),N.m(S,null)):N&&(N.d(1),N=null),I&16&&ne!==(ne=p[4]==="pocketbase"?"PocketBase (Cloud)":"Local (Browser)")&&X(me,ne),I&16&&xe!==(xe="px-2 py-1 text-xs rounded-full "+(p[4]==="pocketbase"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"))&&t(M,"class",xe),I&128&&be!==(be=p[7]?"Exporting...":"Export All Data")&&X(Ke,be),I&128&&(de.disabled=p[7]),I&256&&Ue!==(Ue=p[8]?"Importing...":"Import Data")&&X(bt,Ue),I&256&&(we.disabled=p[8]),I&2&&fe.value!==p[1]&&Nt(fe,p[1]),p[6]?O?O.p(p,I):(O=Vs(p),O.c(),O.m(pe,yt)):O&&(O.d(1),O=null),I&32&&vt!==(vt=p[5]?"Testing...":"Connect Backend")&&X(Dt,vt),I&36&&_t!==(_t=p[2]||p[5])&&(Ie.disabled=_t),I&1&&mt!==(mt=p[0]?"Configured":"Not configured")&&X(xt,mt),I&1&&ht!==(ht=p[0]?"Configured":"Not configured")&&X(wt,ht),I&512&&(Ae.checked=p[9]),p[10].projects>0||p[10].tasks>0||p[10].notes>0||p[10].trees>0||p[10].reports>0?H?H.p(p,I):(H=js(p),H.c(),H.m(ke,null)):H&&(H.d(1),H=null)},i:ns,o:ns,d(p){p&&(l(d),l(o)),N&&N.d(),O&&O.d(),H&&H.d(),os=!1,Ls(ys)}}}function Ps(r){return new Promise((d,o)=>{const f=new FileReader;f.onload=()=>{const h=f.result;d(h.split(",")[1])},f.onerror=o,f.readAsDataURL(r)})}function Bs(r,d){const o=atob(r),f=new Array(o.length);for(let u=0;u<o.length;u++)f[u]=o.charCodeAt(u);const h=new Uint8Array(f);return new Blob([h],{type:d})}function ea(r,d,o){let f="",h="",u=!1,b=!1,k="local",oe=!1,R="",q=!1,K=!1,F=!1,T={projects:0,tasks:0,notes:0,trees:0,reports:0},w=!1;Os(async()=>{const v=rs.get();o(0,f=v.groqApiKey||""),o(9,F=v.dummyDataEnabled||!1);const C=await Ss();o(4,k=C.backend),o(1,h=Fs()||""),o(10,T=await ls())});async function U(){As.set(F),F&&((await ls()).projects===0&&await Zs(),o(10,T=await ls()))}async function ve(){if(confirm("Are you sure you want to delete all dummy data? This cannot be undone.")){o(11,w=!0);try{await Xs(),o(9,F=!1),As.set(!1),o(10,T={projects:0,tasks:0,notes:0,trees:0,reports:0})}catch(v){alert("Failed to clear dummy data: "+(v instanceof Error?v.message:"Unknown error"))}finally{o(11,w=!1)}}}async function ce(){o(2,u=!0),o(3,b=!1),o(6,R="");try{const v=rs.get();if(rs.set({...v,groqApiKey:f.trim()}),localStorage.setItem("oscar-settings",JSON.stringify({...v,groqApiKey:f.trim()})),h.trim()){Ks(h.trim()),o(5,oe=!0),o(6,R="Testing connection...");try{const C=await Ss();o(4,k=C.backend),o(6,R=C.backend==="pocketbase"?"Connected to PocketBase!":"Connection failed. Using local storage.")}catch{o(6,R="Failed to connect. Using local storage."),o(4,k="local")}o(5,oe=!1)}o(3,b=!0),setTimeout(()=>{o(3,b=!1)},2e3)}catch(v){console.error("Failed to save settings:",v)}finally{o(2,u=!1)}}function V(){o(0,f=""),ce()}async function ee(){o(7,q=!0);try{const v=await Q.projects.toArray(),C={version:"1.0",exportedAt:new Date().toISOString(),projects:await Promise.all(v.map(async m=>{const B=await Q.trees.where("projectId").equals(m.id).toArray(),A=await Q.notes.where("projectId").equals(m.id).toArray(),_=await Q.photos.where("projectId").equals(m.id).toArray(),E=await Q.reports.where("projectId").equals(m.id).toArray(),j=await Promise.all(_.map(async te=>({info:{...te,blob:void 0},data:await Ps(te.blob)}))),Oe=await Promise.all(E.map(async te=>({info:{...te,pdfBlob:void 0},data:await Ps(te.pdfBlob)})));return{...m,trees:B,notes:A,photos:j,reports:Oe}}))},le=JSON.stringify(C,null,2),P=new Blob([le],{type:"application/json"}),G=URL.createObjectURL(P),D=document.createElement("a");D.href=G,D.download=`oscar-ai-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(G)}catch(v){alert("Failed to export data: "+(v instanceof Error?v.message:"Unknown error"))}finally{o(7,q=!1)}}async function re(v){var P;const C=v.target;if(!((P=C.files)!=null&&P.length))return;const le=C.files[0];o(8,K=!0);try{const G=await le.text(),D=JSON.parse(G);if(!D.version||!D.projects)throw new Error("Invalid backup file format");for(const m of D.projects){const B=crypto.randomUUID(),A=new Date;if(await Q.projects.add({name:m.name,clientName:m.clientName||"",siteAddress:m.siteAddress||"",createdAt:A.toISOString(),updatedAt:A.toISOString(),rootFolderId:"",driveFolderId:""}),m.trees)for(const _ of m.trees)await Q.trees.add({..._,id:crypto.randomUUID(),projectId:B,createdAt:A.toISOString(),updatedAt:A.toISOString()});if(m.notes)for(const _ of m.notes)await Q.notes.add({..._,id:crypto.randomUUID(),projectId:B,createdAt:A.toISOString(),updatedAt:A.toISOString()});if(m.photos)for(const _ of m.photos){const E=Bs(_.data,_.info.mimeType);await Q.photos.add({..._.info,id:crypto.randomUUID(),projectId:B,blob:E,createdAt:A.toISOString()})}if(m.reports)for(const _ of m.reports){const E=Bs(_.data,"application/pdf");await Q.reports.add({..._.info,id:crypto.randomUUID(),projectId:B,pdfBlob:E,generatedAt:A.toISOString()})}}alert("Data imported successfully! Please refresh the page."),C.value=""}catch(G){alert("Failed to import data: "+(G instanceof Error?G.message:"Unknown error"))}finally{o(8,K=!1)}}function Se(){f=this.value,o(0,f)}function Y(){h=this.value,o(1,h)}function S(){F=this.checked,o(9,F)}return[f,h,u,b,k,oe,R,q,K,F,T,w,U,ve,ce,V,ee,re,Se,Y,S]}class na extends qs{constructor(d){super(),Rs(this,d,ea,$s,Ms,{})}}export{na as component};

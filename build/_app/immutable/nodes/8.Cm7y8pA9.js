import{s as Xt,d as p,r as kt,q as ee,i as Q,b as s,u as Y,l as i,m as Yt,g as N,c as f,e as w,o as K,y as Lt,j as x,h as d,k as Zt,p as $t,a as se,f as re,t as ae,v as Ct,D as Be,E as Me,n as Ie,F as gt,M as el}from"../chunks/scheduler.DKaqMhG1.js";import{S as tl,i as ll,t as ze,a as Le,c as yt,g as wt,d as nl,f as Fe,m as ol,b as sl,e as rl}from"../chunks/index.DlqHU1Qv.js";import{e as Ne,u as al,o as il}from"../chunks/each.C2d3_RSt.js";import{p as cl}from"../chunks/stores.BFoXjtDT.js";import{g as bt,d as at,a as ul}from"../chunks/index.BvaDNSI_.js";import{g as fl}from"../chunks/settings.a3gRd5qY.js";import"../chunks/entry.Be3j---l.js";import{f as it,s as Dt}from"../chunks/index.CV4gNeWM.js";import{M as dl}from"../chunks/MicButton.BEMi5Q8G.js";function St(n,t,e){const l=n.slice();return l[42]=t[e],l}function Vt(n,t,e){const l=n.slice();return l[45]=t[e],l}function Ot(n,t,e){const l=n.slice();return l[48]=t[e],l}function Bt(n,t,e){const l=n.slice();return l[48]=t[e],l}function Mt(n){let t,e;return{c(){t=d("div"),e=ae(n[5]),this.h()},l(l){t=f(l,"DIV",{class:!0});var o=w(t);e=re(o,n[5]),o.forEach(p),this.h()},h(){i(t,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4")},m(l,o){Q(l,t,o),s(t,e)},p(l,o){o[0]&32&&se(e,l[5])},d(l){l&&p(t)}}}function zt(n){let t,e,l="All Tags",o,a,c=Ne(n[6]),u=[];for(let r=0;r<c.length;r+=1)u[r]=Ft(Bt(n,c,r));return{c(){t=d("select"),e=d("option"),e.textContent=l;for(let r=0;r<u.length;r+=1)u[r].c();this.h()},l(r){t=f(r,"SELECT",{class:!0});var v=w(t);e=f(v,"OPTION",{"data-svelte-h":!0}),K(e)!=="svelte-o3dety"&&(e.textContent=l);for(let b=0;b<u.length;b+=1)u[b].l(v);v.forEach(p),this.h()},h(){e.__value="",ee(e,e.__value),i(t,"class","input w-full md:w-48"),n[1]===void 0&&Me(()=>n[23].call(t))},m(r,v){Q(r,t,v),s(t,e);for(let b=0;b<u.length;b+=1)u[b]&&u[b].m(t,null);Be(t,n[1],!0),o||(a=Y(t,"change",n[23]),o=!0)},p(r,v){if(v[0]&64){c=Ne(r[6]);let b;for(b=0;b<c.length;b+=1){const k=Bt(r,c,b);u[b]?u[b].p(k,v):(u[b]=Ft(k),u[b].c(),u[b].m(t,null))}for(;b<u.length;b+=1)u[b].d(1);u.length=c.length}v[0]&66&&Be(t,r[1])},d(r){r&&p(t),Ct(u,r),o=!1,a()}}}function Ft(n){let t,e=n[48]+"",l,o;return{c(){t=d("option"),l=ae(e),this.h()},l(a){t=f(a,"OPTION",{});var c=w(t);l=re(c,e),c.forEach(p),this.h()},h(){t.__value=o=n[48],ee(t,t.__value)},m(a,c){Q(a,t,c),s(t,l)},p(a,c){c[0]&64&&e!==(e=a[48]+"")&&se(l,e),c[0]&64&&o!==(o=a[48])&&(t.__value=o,ee(t,t.__value))},d(a){a&&p(t)}}}function hl(n){let t,e=[],l=new Map,o,a=Ne(n[2]);const c=u=>u[45].id;for(let u=0;u<a.length;u+=1){let r=Vt(n,a,u),v=c(r);l.set(v,e[u]=Rt(v,r))}return{c(){t=d("div");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){t=f(u,"DIV",{class:!0});var r=w(t);for(let v=0;v<e.length;v+=1)e[v].l(r);r.forEach(p),this.h()},h(){i(t,"class","grid gap-4 md:grid-cols-2 lg:grid-cols-3")},m(u,r){Q(u,t,r);for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(t,null);o=!0},p(u,r){r[0]&2179076&&(a=Ne(u[2]),wt(),e=al(e,r,c,1,u,a,l,t,il,Rt,null,Vt),yt())},i(u){if(!o){for(let r=0;r<a.length;r+=1)Le(e[r]);o=!0}},o(u){for(let r=0;r<e.length;r+=1)ze(e[r]);o=!1},d(u){u&&p(t);for(let r=0;r<e.length;r+=1)e[r].d()}}}function pl(n){let t,e,l="No notes yet",o,a,c="Create Your First Note",u,r;return{c(){t=d("div"),e=d("p"),e.textContent=l,o=x(),a=d("button"),a.textContent=c,this.h()},l(v){t=f(v,"DIV",{class:!0});var b=w(t);e=f(b,"P",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1ujdiyq"&&(e.textContent=l),o=N(b),a=f(b,"BUTTON",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-1ne53z0"&&(a.textContent=c),b.forEach(p),this.h()},h(){i(e,"class","text-gray-500 mb-4"),i(a,"class","btn btn-primary"),i(t,"class","text-center py-12")},m(v,b){Q(v,t,b),s(t,e),s(t,o),s(t,a),u||(r=Y(a,"click",n[13]),u=!0)},p:Ie,i:Ie,o:Ie,d(v){v&&p(t),u=!1,r()}}}function _l(n){let t,e='<p class="text-gray-500">Loading notes...</p>';return{c(){t=d("div"),t.innerHTML=e,this.h()},l(l){t=f(l,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-zd80e"&&(t.innerHTML=e),this.h()},h(){i(t,"class","text-center py-12")},m(l,o){Q(l,t,o)},p:Ie,i:Ie,o:Ie,d(l){l&&p(t)}}}function Ht(n){let t,e=n[45].type+"",l,o;return{c(){t=d("span"),l=ae(e),this.h()},l(a){t=f(a,"SPAN",{class:!0});var c=w(t);l=re(c,e),c.forEach(p),this.h()},h(){i(t,"class",o="px-2 py-0.5 text-xs rounded "+Wt(n[45].type)+" svelte-1o294ye")},m(a,c){Q(a,t,c),s(t,l)},p(a,c){c[0]&4&&e!==(e=a[45].type+"")&&se(l,e),c[0]&4&&o!==(o="px-2 py-0.5 text-xs rounded "+Wt(a[45].type)+" svelte-1o294ye")&&i(t,"class",o)},d(a){a&&p(t)}}}function Ut(n){let t,e=n[48]+"",l,o;return{c(){t=d("span"),l=ae(e),o=x(),this.h()},l(a){t=f(a,"SPAN",{class:!0});var c=w(t);l=re(c,e),o=N(c),c.forEach(p),this.h()},h(){i(t,"class","px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded")},m(a,c){Q(a,t,c),s(t,l),s(t,o)},p(a,c){c[0]&4&&e!==(e=a[48]+"")&&se(l,e)},d(a){a&&p(t)}}}function qt(n){let t,e=n[21](n[45].projectId)+"",l;return{c(){t=d("span"),l=ae(e),this.h()},l(o){t=f(o,"SPAN",{class:!0});var a=w(t);l=re(a,e),a.forEach(p),this.h()},h(){i(t,"class","text-forest-600")},m(o,a){Q(o,t,a),s(t,l)},p(o,a){a[0]&4&&e!==(e=o[21](o[45].projectId)+"")&&se(l,e)},d(o){o&&p(t)}}}function Rt(n,t){let e,l,o,a=t[45].title+"",c,u,r,v='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',b,k,D=t[45].content+"",M,oe,j,C,m,A,O,W=Qt(t[45].updatedAt)+"",le,B,T=t[21](t[45].projectId),X,H,z,S,g;function U(){return t[24](t[45])}let I=t[45].type&&Ht(t),q=Ne((t[45].tags||[]).slice(0,3)),P=[];for(let E=0;E<q.length;E+=1)P[E]=Ut(Ot(t,q,E));let R=T&&qt(t);function xe(){return t[25](t[45])}return{key:n,first:null,c(){e=d("div"),l=d("div"),o=d("h3"),c=ae(a),u=x(),r=d("button"),r.innerHTML=v,b=x(),k=d("p"),M=ae(D),oe=x(),j=d("div"),I&&I.c(),C=x();for(let E=0;E<P.length;E+=1)P[E].c();m=x(),A=d("div"),O=d("span"),le=ae(W),B=x(),R&&R.c(),X=x(),this.h()},l(E){e=f(E,"DIV",{class:!0});var L=w(e);l=f(L,"DIV",{class:!0});var V=w(l);o=f(V,"H3",{class:!0});var fe=w(o);c=re(fe,a),fe.forEach(p),u=N(V),r=f(V,"BUTTON",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-8mvads"&&(r.innerHTML=v),V.forEach(p),b=N(L),k=f(L,"P",{class:!0});var ce=w(k);M=re(ce,D),ce.forEach(p),oe=N(L),j=f(L,"DIV",{class:!0});var ne=w(j);I&&I.l(ne),C=N(ne);for(let Z=0;Z<P.length;Z+=1)P[Z].l(ne);ne.forEach(p),m=N(L),A=f(L,"DIV",{class:!0});var ve=w(A);O=f(ve,"SPAN",{});var ye=w(O);le=re(ye,W),ye.forEach(p),B=N(ve),R&&R.l(ve),ve.forEach(p),X=N(L),L.forEach(p),this.h()},h(){i(o,"class","font-semibold text-gray-900 truncate flex-1"),i(r,"class","text-gray-400 hover:text-red-500 p-1"),i(l,"class","flex items-start justify-between mb-2"),i(k,"class","text-gray-600 text-sm line-clamp-3 mb-3 svelte-1o294ye"),i(j,"class","flex flex-wrap gap-1 mb-2"),i(A,"class","flex items-center justify-between text-xs text-gray-500"),i(e,"class","card p-4 hover:shadow-md transition-shadow cursor-pointer"),this.first=e},m(E,L){Q(E,e,L),s(e,l),s(l,o),s(o,c),s(l,u),s(l,r),s(e,b),s(e,k),s(k,M),s(e,oe),s(e,j),I&&I.m(j,null),s(j,C);for(let V=0;V<P.length;V+=1)P[V]&&P[V].m(j,null);s(e,m),s(e,A),s(A,O),s(O,le),s(A,B),R&&R.m(A,null),s(e,X),z=!0,S||(g=[Y(r,"click",el(U)),Y(e,"click",xe)],S=!0)},p(E,L){if(t=E,(!z||L[0]&4)&&a!==(a=t[45].title+"")&&se(c,a),(!z||L[0]&4)&&D!==(D=t[45].content+"")&&se(M,D),t[45].type?I?I.p(t,L):(I=Ht(t),I.c(),I.m(j,C)):I&&(I.d(1),I=null),L[0]&4){q=Ne((t[45].tags||[]).slice(0,3));let V;for(V=0;V<q.length;V+=1){const fe=Ot(t,q,V);P[V]?P[V].p(fe,L):(P[V]=Ut(fe),P[V].c(),P[V].m(j,null))}for(;V<P.length;V+=1)P[V].d(1);P.length=q.length}(!z||L[0]&4)&&W!==(W=Qt(t[45].updatedAt)+"")&&se(le,W),L[0]&4&&(T=t[21](t[45].projectId)),T?R?R.p(t,L):(R=qt(t),R.c(),R.m(A,null)):R&&(R.d(1),R=null)},i(E){z||(E&&Me(()=>{z&&(H||(H=Fe(e,it,{},!0)),H.run(1))}),z=!0)},o(E){E&&(H||(H=Fe(e,it,{},!1)),H.run(0)),z=!1},d(E){E&&p(e),I&&I.d(),Ct(P,E),R&&R.d(),E&&H&&H.end(),S=!1,kt(g)}}}function Gt(n){let t,e,l,o,a=n[9]?"Edit Note":"New Note",c,u,r,v='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b,k,D,M,oe="Title",j,C,m,A,O,W,le="Type",B,T,X,H="General",z,S="Voice Note",g,U="Field Note",I,q,P,R="Link to Project",xe,E,L,V="None",fe,ce,ne,ve="Tags (comma separated)",ye,Z,He,h,y,G,De="Content",ge,ie,de,je=n[11]&&n[12]==="Summarizing..."?"Processing...":"Summarize",Re,Ge,ct,be,Ue=n[11]&&n[12]==="Expanding..."?"Processing...":"Expand",Je,Ke,ut,he,ft,Se,we,dt,_e,Qe,ht,ke,Ce,Et="Cancel",pt,Ae,qe=n[9]?"Save Changes":"Create Note",We,Ee,Te,ue,_t,Tt,Ve=Ne(n[3]),$=[];for(let _=0;_<Ve.length;_+=1)$[_]=Jt(St(n,Ve,_));we=new dl({}),we.$on("transcript",n[32]);function It(_,J){return _[7]?ml:vl}let Xe=It(n),pe=Xe(n),te=n[11]&&Kt(n);return{c(){t=d("div"),e=d("div"),l=d("div"),o=d("h2"),c=ae(a),u=x(),r=d("button"),r.innerHTML=v,b=x(),k=d("div"),D=d("div"),M=d("label"),M.textContent=oe,j=x(),C=d("input"),m=x(),A=d("div"),O=d("div"),W=d("label"),W.textContent=le,B=x(),T=d("select"),X=d("option"),X.textContent=H,z=d("option"),z.textContent=S,g=d("option"),g.textContent=U,I=x(),q=d("div"),P=d("label"),P.textContent=R,xe=x(),E=d("select"),L=d("option"),L.textContent=V;for(let _=0;_<$.length;_+=1)$[_].c();fe=x(),ce=d("div"),ne=d("label"),ne.textContent=ve,ye=x(),Z=d("input"),He=x(),h=d("div"),y=d("div"),G=d("label"),G.textContent=De,ge=x(),ie=d("div"),de=d("button"),Re=ae(je),ct=x(),be=d("button"),Je=ae(Ue),ut=x(),he=d("textarea"),ft=x(),Se=d("div"),rl(we.$$.fragment),dt=x(),_e=d("div"),pe.c(),Qe=x(),te&&te.c(),ht=x(),ke=d("div"),Ce=d("button"),Ce.textContent=Et,pt=x(),Ae=d("button"),We=ae(qe),this.h()},l(_){t=f(_,"DIV",{class:!0});var J=w(t);e=f(J,"DIV",{class:!0});var F=w(e);l=f(F,"DIV",{class:!0});var Pe=w(l);o=f(Pe,"H2",{class:!0});var Nt=w(o);c=re(Nt,a),Nt.forEach(p),u=N(Pe),r=f(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-13xgc2v"&&(r.innerHTML=v),Pe.forEach(p),b=N(F),k=f(F,"DIV",{class:!0});var me=w(k);D=f(me,"DIV",{});var Ye=w(D);M=f(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(M)!=="svelte-yguj81"&&(M.textContent=oe),j=N(Ye),C=f(Ye,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Ye.forEach(p),m=N(me),A=f(me,"DIV",{class:!0});var Ze=w(A);O=f(Ze,"DIV",{});var $e=w(O);W=f($e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(W)!=="svelte-kowzkr"&&(W.textContent=le),B=N($e),T=f($e,"SELECT",{id:!0,class:!0});var et=w(T);X=f(et,"OPTION",{"data-svelte-h":!0}),K(X)!=="svelte-1m4wjg2"&&(X.textContent=H),z=f(et,"OPTION",{"data-svelte-h":!0}),K(z)!=="svelte-i0h4ss"&&(z.textContent=S),g=f(et,"OPTION",{"data-svelte-h":!0}),K(g)!=="svelte-1oh4w6g"&&(g.textContent=U),et.forEach(p),$e.forEach(p),I=N(Ze),q=f(Ze,"DIV",{});var tt=w(q);P=f(tt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(P)!=="svelte-8cuki2"&&(P.textContent=R),xe=N(tt),E=f(tt,"SELECT",{id:!0,class:!0});var mt=w(E);L=f(mt,"OPTION",{"data-svelte-h":!0}),K(L)!=="svelte-1vbnolo"&&(L.textContent=V);for(let vt=0;vt<$.length;vt+=1)$[vt].l(mt);mt.forEach(p),tt.forEach(p),Ze.forEach(p),fe=N(me),ce=f(me,"DIV",{});var lt=w(ce);ne=f(lt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(ne)!=="svelte-13i2w4o"&&(ne.textContent=ve),ye=N(lt),Z=f(lt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),lt.forEach(p),He=N(me),h=f(me,"DIV",{});var Oe=w(h);y=f(Oe,"DIV",{class:!0});var nt=w(y);G=f(nt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(G)!=="svelte-189mlfa"&&(G.textContent=De),ge=N(nt),ie=f(nt,"DIV",{class:!0});var ot=w(ie);de=f(ot,"BUTTON",{class:!0});var xt=w(de);Re=re(xt,je),xt.forEach(p),ct=N(ot),be=f(ot,"BUTTON",{class:!0});var jt=w(be);Je=re(jt,Ue),jt.forEach(p),ot.forEach(p),nt.forEach(p),ut=N(Oe),he=f(Oe,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),w(he).forEach(p),ft=N(Oe),Se=f(Oe,"DIV",{class:!0});var At=w(Se);sl(we.$$.fragment,At),At.forEach(p),Oe.forEach(p),dt=N(me),_e=f(me,"DIV",{class:!0});var st=w(_e);pe.l(st),Qe=N(st),te&&te.l(st),st.forEach(p),me.forEach(p),ht=N(F),ke=f(F,"DIV",{class:!0});var rt=w(ke);Ce=f(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),K(Ce)!=="svelte-1lnc9cw"&&(Ce.textContent=Et),pt=N(rt),Ae=f(rt,"BUTTON",{class:!0});var Pt=w(Ae);We=re(Pt,qe),Pt.forEach(p),rt.forEach(p),F.forEach(p),J.forEach(p),this.h()},h(){i(o,"class","text-lg font-semibold"),i(r,"class","text-gray-400 hover:text-gray-600"),i(l,"class","px-6 py-4 border-b flex items-center justify-between"),i(M,"for","title"),i(M,"class","block text-sm font-medium text-gray-700 mb-1"),i(C,"id","title"),i(C,"type","text"),i(C,"placeholder","Note title"),i(C,"class","input w-full"),C.required=!0,i(W,"for","type"),i(W,"class","block text-sm font-medium text-gray-700 mb-1"),X.__value="general",ee(X,X.__value),z.__value="voice",ee(z,z.__value),g.__value="field",ee(g,g.__value),i(T,"id","type"),i(T,"class","input w-full"),n[10].type===void 0&&Me(()=>n[28].call(T)),i(P,"for","project"),i(P,"class","block text-sm font-medium text-gray-700 mb-1"),L.__value="",ee(L,L.__value),i(E,"id","project"),i(E,"class","input w-full"),n[10].projectId===void 0&&Me(()=>n[29].call(E)),i(A,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),i(ne,"for","tags"),i(ne,"class","block text-sm font-medium text-gray-700 mb-1"),i(Z,"id","tags"),i(Z,"type","text"),i(Z,"placeholder","e.g., important, meeting, idea"),i(Z,"class","input w-full"),i(G,"for","content"),i(G,"class","block text-sm font-medium text-gray-700"),de.disabled=Ge=n[11]||!n[10].content.trim(),i(de,"class","text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50"),be.disabled=Ke=n[11]||!n[10].content.trim(),i(be,"class","text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 disabled:opacity-50"),i(ie,"class","flex gap-2"),i(y,"class","flex items-center justify-between mb-1"),i(he,"id","content"),i(he,"placeholder","Write your note here..."),i(he,"rows","10"),i(he,"class","input w-full resize-none"),i(Se,"class","mt-2"),i(_e,"class","flex items-center gap-4"),i(k,"class","flex-1 overflow-y-auto p-6 space-y-4"),i(Ce,"class","btn btn-secondary"),i(Ae,"class","btn btn-primary"),i(ke,"class","px-6 py-4 border-t bg-gray-50 flex justify-end gap-3"),i(e,"class","bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col"),i(t,"class","fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4")},m(_,J){Q(_,t,J),s(t,e),s(e,l),s(l,o),s(o,c),s(l,u),s(l,r),s(e,b),s(e,k),s(k,D),s(D,M),s(D,j),s(D,C),ee(C,n[10].title),s(k,m),s(k,A),s(A,O),s(O,W),s(O,B),s(O,T),s(T,X),s(T,z),s(T,g),Be(T,n[10].type,!0),s(A,I),s(A,q),s(q,P),s(q,xe),s(q,E),s(E,L);for(let F=0;F<$.length;F+=1)$[F]&&$[F].m(E,null);Be(E,n[10].projectId,!0),s(k,fe),s(k,ce),s(ce,ne),s(ce,ye),s(ce,Z),ee(Z,n[10].tags),s(k,He),s(k,h),s(h,y),s(y,G),s(y,ge),s(y,ie),s(ie,de),s(de,Re),s(ie,ct),s(ie,be),s(be,Je),s(h,ut),s(h,he),ee(he,n[10].content),s(h,ft),s(h,Se),ol(we,Se,null),s(k,dt),s(k,_e),pe.m(_e,null),s(_e,Qe),te&&te.m(_e,null),s(e,ht),s(e,ke),s(ke,Ce),s(ke,pt),s(ke,Ae),s(Ae,We),ue=!0,_t||(Tt=[Y(r,"click",n[26]),Y(C,"input",n[27]),Y(T,"change",n[28]),Y(E,"change",n[29]),Y(Z,"input",n[30]),Y(de,"click",n[19]),Y(be,"click",n[20]),Y(he,"input",n[31]),Y(Ce,"click",n[33]),Y(Ae,"click",n[15])],_t=!0)},p(_,J){if((!ue||J[0]&512)&&a!==(a=_[9]?"Edit Note":"New Note")&&se(c,a),J[0]&1024&&C.value!==_[10].title&&ee(C,_[10].title),J[0]&1024&&Be(T,_[10].type),J[0]&8){Ve=Ne(_[3]);let F;for(F=0;F<Ve.length;F+=1){const Pe=St(_,Ve,F);$[F]?$[F].p(Pe,J):($[F]=Jt(Pe),$[F].c(),$[F].m(E,null))}for(;F<$.length;F+=1)$[F].d(1);$.length=Ve.length}J[0]&1024&&Be(E,_[10].projectId),J[0]&1024&&Z.value!==_[10].tags&&ee(Z,_[10].tags),(!ue||J[0]&6144)&&je!==(je=_[11]&&_[12]==="Summarizing..."?"Processing...":"Summarize")&&se(Re,je),(!ue||J[0]&3072&&Ge!==(Ge=_[11]||!_[10].content.trim()))&&(de.disabled=Ge),(!ue||J[0]&6144)&&Ue!==(Ue=_[11]&&_[12]==="Expanding..."?"Processing...":"Expand")&&se(Je,Ue),(!ue||J[0]&3072&&Ke!==(Ke=_[11]||!_[10].content.trim()))&&(be.disabled=Ke),J[0]&1024&&ee(he,_[10].content),Xe===(Xe=It(_))&&pe?pe.p(_,J):(pe.d(1),pe=Xe(_),pe&&(pe.c(),pe.m(_e,Qe))),_[11]?te?te.p(_,J):(te=Kt(_),te.c(),te.m(_e,null)):te&&(te.d(1),te=null),(!ue||J[0]&512)&&qe!==(qe=_[9]?"Save Changes":"Create Note")&&se(We,qe)},i(_){ue||(Le(we.$$.fragment,_),_&&Me(()=>{ue&&(Ee||(Ee=Fe(e,Dt,{},!0)),Ee.run(1))}),_&&Me(()=>{ue&&(Te||(Te=Fe(t,it,{},!0)),Te.run(1))}),ue=!0)},o(_){ze(we.$$.fragment,_),_&&(Ee||(Ee=Fe(e,Dt,{},!1)),Ee.run(0)),_&&(Te||(Te=Fe(t,it,{},!1)),Te.run(0)),ue=!1},d(_){_&&p(t),Ct($,_),nl(we),pe.d(),te&&te.d(),_&&Ee&&Ee.end(),_&&Te&&Te.end(),_t=!1,kt(Tt)}}}function Jt(n){let t,e=n[42].name+"",l,o;return{c(){t=d("option"),l=ae(e),this.h()},l(a){t=f(a,"OPTION",{});var c=w(t);l=re(c,e),c.forEach(p),this.h()},h(){t.__value=o=n[42].id,ee(t,t.__value)},m(a,c){Q(a,t,c),s(t,l)},p(a,c){c[0]&8&&e!==(e=a[42].name+"")&&se(l,e),c[0]&8&&o!==(o=a[42].id)&&(t.__value=o,ee(t,t.__value))},d(a){a&&p(t)}}}function ml(n){let t,e=`<span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>
							Stop Recording`,l,o,a="Recording...",c,u;return{c(){t=d("button"),t.innerHTML=e,l=x(),o=d("span"),o.textContent=a,this.h()},l(r){t=f(r,"BUTTON",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-sij9wp"&&(t.innerHTML=e),l=N(r),o=f(r,"SPAN",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-18cj6ho"&&(o.textContent=a),this.h()},h(){i(t,"class","btn bg-red-500 text-white hover:bg-red-600 flex items-center gap-2"),i(o,"class","text-sm text-red-600")},m(r,v){Q(r,t,v),Q(r,l,v),Q(r,o,v),c||(u=Y(t,"click",n[18]),c=!0)},p:Ie,d(r){r&&(p(t),p(l),p(o)),c=!1,u()}}}function vl(n){let t,e=`<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"></path><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"></path></svg>
							Record Voice`,l,o;return{c(){t=d("button"),t.innerHTML=e,this.h()},l(a){t=f(a,"BUTTON",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-tkyfut"&&(t.innerHTML=e),this.h()},h(){i(t,"class","btn btn-secondary flex items-center gap-2")},m(a,c){Q(a,t,c),l||(o=Y(t,"click",n[17]),l=!0)},p:Ie,d(a){a&&p(t),l=!1,o()}}}function Kt(n){let t,e;return{c(){t=d("span"),e=ae(n[12]),this.h()},l(l){t=f(l,"SPAN",{class:!0});var o=w(t);e=re(o,n[12]),o.forEach(p),this.h()},h(){i(t,"class","text-sm text-forest-600")},m(l,o){Q(l,t,o),s(t,e)},p(l,o){o[0]&4096&&se(e,l[12])},d(l){l&&p(t)}}}function gl(n){let t,e,l,o,a='<h1 class="text-2xl font-bold text-gray-900">Notes</h1> <p class="text-gray-600">Create and manage your notes with AI assistance</p>',c,u,r="+ New Note",v,b,k,D,M,oe,j,C,m,A,O,W,le,B=n[5]&&Mt(n),T=n[6].length>0&&zt(n);const X=[_l,pl,hl],H=[];function z(g,U){return g[4]?0:g[2].length===0?1:2}j=z(n),C=H[j]=X[j](n);let S=n[8]&&Gt(n);return{c(){t=x(),e=d("div"),l=d("div"),o=d("div"),o.innerHTML=a,c=x(),u=d("button"),u.textContent=r,v=x(),B&&B.c(),b=x(),k=d("div"),D=d("input"),M=x(),T&&T.c(),oe=x(),C.c(),m=x(),S&&S.c(),A=Lt(),this.h()},l(g){Yt("svelte-1r5lohg",document.head).forEach(p),t=N(g),e=f(g,"DIV",{class:!0});var I=w(e);l=f(I,"DIV",{class:!0});var q=w(l);o=f(q,"DIV",{"data-svelte-h":!0}),K(o)!=="svelte-1q8uwez"&&(o.innerHTML=a),c=N(q),u=f(q,"BUTTON",{class:!0,"data-svelte-h":!0}),K(u)!=="svelte-1363wms"&&(u.textContent=r),q.forEach(p),v=N(I),B&&B.l(I),b=N(I),k=f(I,"DIV",{class:!0});var P=w(k);D=f(P,"INPUT",{type:!0,placeholder:!0,class:!0}),M=N(P),T&&T.l(P),P.forEach(p),oe=N(I),C.l(I),I.forEach(p),m=N(g),S&&S.l(g),A=Lt(),this.h()},h(){document.title="Notes - Oscar AI",i(u,"class","btn btn-primary"),i(l,"class","mb-6 flex items-center justify-between"),i(D,"type","text"),i(D,"placeholder","Search notes..."),i(D,"class","input flex-1"),i(k,"class","mb-6 flex flex-col md:flex-row gap-4"),i(e,"class","max-w-6xl mx-auto")},m(g,U){Q(g,t,U),Q(g,e,U),s(e,l),s(l,o),s(l,c),s(l,u),s(e,v),B&&B.m(e,null),s(e,b),s(e,k),s(k,D),ee(D,n[0]),s(k,M),T&&T.m(k,null),s(e,oe),H[j].m(e,null),Q(g,m,U),S&&S.m(g,U),Q(g,A,U),O=!0,W||(le=[Y(u,"click",n[13]),Y(D,"input",n[22])],W=!0)},p(g,U){g[5]?B?B.p(g,U):(B=Mt(g),B.c(),B.m(e,b)):B&&(B.d(1),B=null),U[0]&1&&D.value!==g[0]&&ee(D,g[0]),g[6].length>0?T?T.p(g,U):(T=zt(g),T.c(),T.m(k,null)):T&&(T.d(1),T=null);let I=j;j=z(g),j===I?H[j].p(g,U):(wt(),ze(H[I],1,1,()=>{H[I]=null}),yt(),C=H[j],C?C.p(g,U):(C=H[j]=X[j](g),C.c()),Le(C,1),C.m(e,null)),g[8]?S?(S.p(g,U),U[0]&256&&Le(S,1)):(S=Gt(g),S.c(),Le(S,1),S.m(A.parentNode,A)):S&&(wt(),ze(S,1,1,()=>{S=null}),yt())},i(g){O||(Le(C),Le(S),O=!0)},o(g){ze(C),ze(S),O=!1},d(g){g&&(p(t),p(e),p(m),p(A)),B&&B.d(),T&&T.d(),H[j].d(),S&&S.d(g),W=!1,kt(le)}}}function Qt(n){return new Date(n).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Wt(n){switch(n){case"voice":return"bg-purple-100 text-purple-800";case"field":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function bl(n,t,e){let l;Zt(n,cl,h=>e(37,l=h));let o="";fl.subscribe(h=>{o=h});let a=[],c=[],u=!0,r="",v="",b="",k=[],D=!1,M=null,oe=[],j=!1,C=null,m={title:"",content:"",tags:"",projectId:"",type:"general"},A=!1,O="";$t(async()=>{const h=new URLSearchParams(l.url.search),y=h.get("note"),G=h.get("mode");if(await le(),await W(),y&&G==="edit"){const ge=(await bt()).find(ie=>ie.id===y);ge&&X(ge)}});async function W(){try{e(3,c=await at.projects.toArray())}catch(h){console.error("Failed to load projects:",h)}}async function le(){e(4,u=!0),e(5,r="");try{if(b)e(2,a=await ul(b));else if(v){const h=await bt();e(2,a=h.filter(y=>y.title.toLowerCase().includes(v.toLowerCase())||y.content.toLowerCase().includes(v.toLowerCase())||y.tags.some(G=>G.toLowerCase().includes(v.toLowerCase()))))}else e(2,a=await bt());B()}catch(h){e(5,r="Failed to load notes"),console.error(h)}finally{e(4,u=!1)}}function B(){const h=new Set;a.forEach(y=>{var G;(G=y.tags)==null||G.forEach(De=>h.add(De))}),e(6,k=Array.from(h).sort())}function T(){e(9,C=null),e(10,m={title:"",content:"",tags:"",projectId:"",type:"general"}),e(8,j=!0)}function X(h){var y;e(9,C=h),e(10,m={title:h.title,content:h.content,tags:((y=h.tags)==null?void 0:y.join(", "))||"",projectId:h.projectId||"",type:h.type||"general"}),e(8,j=!0)}async function H(){if(!m.title.trim())return;e(5,r="");const h=m.tags.split(",").map(y=>y.trim()).filter(y=>y);try{C?await at.notes.update(C.id,{title:m.title,content:m.content,tags:h,projectId:m.projectId||void 0,type:m.type,updatedAt:new Date}):await at.notes.add({title:m.title,content:m.content,tags:h,projectId:m.projectId||void 0,type:m.type,createdAt:new Date,updatedAt:new Date}),e(8,j=!1),e(9,C=null),await le()}catch(y){e(5,r="Failed to save note"),console.error(y)}}async function z(h){if(confirm("Are you sure you want to delete this note?"))try{await at.notes.delete(h.id),await le()}catch(y){e(5,r="Failed to delete note"),console.error(y)}}async function S(){try{const h=await navigator.mediaDevices.getUserMedia({audio:!0});M=new MediaRecorder(h),oe=[],M.ondataavailable=y=>{oe.push(y.data)},M.onstop=async()=>{const y=new Blob(oe,{type:"audio/webm"});await U(y),h.getTracks().forEach(G=>G.stop())},M.start(),e(7,D=!0)}catch(h){e(5,r="Failed to start recording"),console.error(h)}}function g(){M&&D&&(M.stop(),e(7,D=!1))}async function U(h){e(11,A=!0),e(12,O="Transcribing voice note...");try{if(!o){e(5,r="Please set your Groq API key in Settings");return}const y=new FileReader,G=new Promise(de=>{y.onloadend=()=>{const je=y.result;de(je.split(",")[1])}});y.readAsDataURL(h);const De=await G,ge=await fetch("https://api.groq.com/openai/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:new FormData().append("file",h,"audio.webm").append("model","whisper-large-v3")});if(!ge.ok)throw new Error("Transcription failed");const ie=await ge.json();C?e(10,m.content+=`

`+ie.text,m):(e(10,m.content=ie.text,m),e(10,m.type="voice",m))}catch(y){e(5,r="Failed to transcribe audio"),console.error(y)}finally{e(11,A=!1),e(12,O="")}}async function I(){if(m.content.trim()){e(11,A=!0),e(12,O="Summarizing...");try{if(!o){e(5,r="Please set your Groq API key in Settings");return}const h=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-70b-versatile",messages:[{role:"user",content:`Summarize the following note concisely:

${m.content}`}],temperature:.3})});if(!h.ok)throw new Error("AI request failed");const y=await h.json();e(10,m.content=y.choices[0].message.content,m)}catch(h){e(5,r="Failed to summarize"),console.error(h)}finally{e(11,A=!1),e(12,O="")}}}async function q(){if(m.content.trim()){e(11,A=!0),e(12,O="Expanding...");try{if(!o){e(5,r="Please set your Groq API key in Settings");return}const h=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-70b-versatile",messages:[{role:"user",content:`Expand and elaborate on the following note with more detail:

${m.content}`}],temperature:.7})});if(!h.ok)throw new Error("AI request failed");const y=await h.json();e(10,m.content=y.choices[0].message.content,m)}catch(h){e(5,r="Failed to expand"),console.error(h)}finally{e(11,A=!1),e(12,O="")}}}function P(h){if(!h)return null;const y=c.find(G=>G.id===h);return(y==null?void 0:y.name)||null}function R(){v=this.value,e(0,v)}function xe(){b=gt(this),e(1,b),e(6,k)}const E=h=>z(h),L=h=>X(h),V=()=>e(8,j=!1);function fe(){m.title=this.value,e(10,m)}function ce(){m.type=gt(this),e(10,m)}function ne(){m.projectId=gt(this),e(10,m)}function ve(){m.tags=this.value,e(10,m)}function ye(){m.content=this.value,e(10,m)}const Z=h=>e(10,m.content+=h.detail.text,m),He=()=>e(8,j=!1);return n.$$.update=()=>{n.$$.dirty[0]&3&&(b!==void 0||v!==void 0)&&le()},[v,b,a,c,u,r,k,D,j,C,m,A,O,T,X,H,z,S,g,I,q,P,R,xe,E,L,V,fe,ce,ne,ve,ye,Z,He]}class jl extends tl{constructor(t){super(),ll(this,t,bl,gl,Xt,{},null,[-1,-1])}}export{jl as component};
